
obey TEST122(clnup);

log LOG122 clear;

obey TEST122(test1);

obey TEST122(clnup);

exit;

?section test1

obey TEST122(crdb);

prepare s1 from insert into t122t1 values
  (0)
, (5)
, (1)
;

obey TEST122(uid_in_plan);

execute s1;

prepare s1 from select * from t122t1;

obey TEST122(uid_in_plan);

execute s1;

invoke t122t1;

select count(*) from t122t1;

update t122t1 set a = 55 where a = 5;

delete from t122t1 where a = 55;
    
sh sqlci -i"TEST122(redefine1)";

select * from t122t1;

invoke t122t1;

insert into t122t1 values ('i'), ('ii'), ('iii'), ('iv');

select count(*) from t122t1;

update t122t1 set a = 'ix' where a = 'ii';

delete from t122t1 where a = 'i';

?section clnup

drop table t122t1 cascade;

?section crdb

create table t122t1 ( a int not null );

?section uid_in_plan
log;
log PLAN122 clear;
explain s1;
log;
sh echo "look for one uid only" >> LOG122; 
sh grep "^  ObjectUIDs .* [1-9][0-9]*$" PLAN122 | cut -c 1-20 >> LOG122; 
sh echo "look for more than one uid" >> LOG122; 
sh grep "^  ObjectUIDs .* [1-9][0-9]*," PLAN122;
log LOG122;

?section redefine1

log LOG122;

drop table t122t1;

create table t122t1 ( a char(4) not null );

insert into t122t1 values ('i'), ('ii'), ('iii'), ('iv');

