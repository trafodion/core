>>obey TEST010(setup);
>>--------------------------------------------------------------------------
>>
>>cqd hbase_max_column_name_length '10';

--- SQL operation complete.
>>cqd hbase_max_column_val_length '20';

--- SQL operation complete.
>>cqd hbase_max_column_info_length '60';

--- SQL operation complete.
>>
>>
>>cqd hbase_serialization 'OFF';

--- SQL operation complete.
>>cqd hbase_filter_preds 'OFF';

--- SQL operation complete.
>>
>>-- query_cache on(default), mdam_scan_method on(default)
>>cqd query_cache '1024';

--- SQL operation complete.
>>cqd mdam_scan_method 'ON';

--- SQL operation complete.
>>obey TEST010(clean_up);
>>--------------------------------------------------------------------------
>>drop table if exists t010t1;

--- SQL operation complete.
>>drop table if exists t010t2;

--- SQL operation complete.
>>drop table if exists t010t3;

--- SQL operation complete.
>>
>>obey TEST010(tests);
>>--------------------------------------------------------------------------
>>
>>create table if not exists t010t1 (a int not null, b char(10), primary key(a));

--- SQL operation complete.
>>create table if not exists t010t2 (a int not null, b char(10) not null, c int not null, d char(10), primary key(a,b,c));

--- SQL operation complete.
>>create table if not exists t010t3 (a int not null, b char(10) not null, c int not null, d char(10), primary key(a,b,c))
+>  salt using 4 partitions on (a,b);

--- SQL operation complete.
>>
>>invoke t010t1;

-- Definition of Trafodion table TRAFODION.SCH.T010T1
-- Definition current  Thu Oct 30 04:03:30 2014

  (
    A                                INT NO DEFAULT NOT NULL NOT DROPPABLE
  , B                                CHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT DEFAULT NULL
  )

--- SQL operation complete.
>>invoke hbase."_CELL_"."TRAFODION.SCH.T010T1";

-- Definition of Trafodion table HBASE."_CELL_"."TRAFODION.SCH.T010T1"
-- Definition current  Thu Oct 30 04:03:30 2014

  (
    ROW_ID                           VARCHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , COL_FAMILY                       VARCHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , COL_NAME                         VARCHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , COL_TIMESTAMP                    LARGEINT NO DEFAULT NOT NULL NOT DROPPABLE
  , COL_VALUE                        VARCHAR(20) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  )

--- SQL operation complete.
>>invoke hbase."_ROW_"."TRAFODION.SCH.T010T1";

-- Definition of Trafodion table HBASE."_ROW_"."TRAFODION.SCH.T010T1"
-- Definition current  Thu Oct 30 04:03:30 2014

  (
    ROW_ID                           VARCHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , COLUMN_DETAILS                   VARCHAR(60) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  )

--- SQL operation complete.
>>
>>insert into t010t1 values (1, 'a'), (2, 'b'), (3, 'c');

--- 3 row(s) inserted.
>>
>>select * from t010t1;

A            B         
-----------  ----------

          1  a         
          2  b         
          3  c         

--- 3 row(s) selected.
>>
>>select * from t010t1 where a = 2;

A            B         
-----------  ----------

          2  b         

--- 1 row(s) selected.
>>
>>select * from t010t1 where a = 2 or a = 3;

A            B         
-----------  ----------

          2  b         
          3  c         

--- 2 row(s) selected.
>>
>>delete from t010t1 where a = 4;

--- 0 row(s) deleted.
>>
>>select * from t010t1;

A            B         
-----------  ----------

          1  a         
          2  b         
          3  c         

--- 3 row(s) selected.
>>
>>delete from t010t1 where a = 2;

--- 1 row(s) deleted.
>>
>>select * from t010t1;

A            B         
-----------  ----------

          1  a         
          3  c         

--- 2 row(s) selected.
>>
>>select converttohex(cast(row_id as char(4))) rowid,
+>          converttohex(cast(col_family as char(2))) colfamily,
+>          converttohex(cast(col_name as char(1))) colname,
+>          converttohex(cast(col_value as char(4))) colvalue
+>                from hbase."_CELL_"."TRAFODION.SCH.T010T1";

ROWID     COLFAMILY  COLNAME  COLVALUE
--------  ---------  -------  --------

80000001  2331       01       01000000
80000001  2331       02       00612020
80000003  2331       01       03000000
80000003  2331       02       00632020

--- 4 row(s) selected.
>>
>>select converttohex(cast(row_id as char(4))) rowid,
+>          converttohex(cast(col_family as char(2))) colfamily,
+>          converttohex(cast(col_name as char(1))) colname,
+>          converttohex(cast(col_value as char(4))) colvalue
+>                from hbase."_CELL_"."TRAFODION.SCH.T010T1"
+>          where converttohex(cast(row_id as char(4))) = '80000001';

ROWID     COLFAMILY  COLNAME  COLVALUE
--------  ---------  -------  --------

80000001  2331       01       01000000
80000001  2331       02       00612020

--- 2 row(s) selected.
>>
>>select converttohex(cast(row_id as char(4))) rowid,
+>          converttohex(cast(column_details as char(40))) coldetails
+>                 from hbase."_ROW_"."TRAFODION.SCH.T010T1";

ROWID     COLDETAILS
--------  --------------------------------------------------------------------------------

80000001  040023313A010400000001000000040023313A020B00000000612020202020202020202020202020
80000003  040023313A010400000003000000040023313A020B00000000632020202020202020202020202020

--- 2 row(s) selected.
>>select converttohex(cast(row_id as char(4))) rowid,
+>          converttohex(cast(column_details as char(40))) coldetails
+>                 from hbase."_ROW_"."TRAFODION.SCH.T010T1"
+>          where converttohex(cast(row_id as char(4))) = '80000001';

ROWID     COLDETAILS
--------  --------------------------------------------------------------------------------

80000001  040023313A010400000001000000040023313A020B00000000612020202020202020202020202020

--- 1 row(s) selected.
>>
>>-------------------
>>-- check query plan
>>-------------------
>>
>>-- no sort operator should present when order by on primary key column
>>prepare xx from select * from t010t1 order by a;

--- SQL command prepared.
>>explain options 'f' xx;

LC   RC   OP   OPERATOR              OPT       DESCRIPTION           CARD
---- ---- ---- --------------------  --------  --------------------  ---------

1    .    2    root                                                  1.00E+002
.    .    1    trafodion_scan                  T010T1                1.00E+002

--- SQL operation complete.
>>
>>-- should see a sort when order by on non key column
>>prepare xx from select * from t010t1 order by b;

--- SQL command prepared.
>>explain options 'f' xx;

LC   RC   OP   OPERATOR              OPT       DESCRIPTION           CARD
---- ---- ---- --------------------  --------  --------------------  ---------

2    .    3    root                                                  1.00E+002
1    .    2    sort                                                  1.00E+002
.    .    1    trafodion_scan                  T010T1                1.00E+002

--- SQL operation complete.
>>
>>-- selectPred should present due to the 2nd disjunct b='1'
>>prepare xx from select * from t010t1 where a=1 or b='1';

--- SQL command prepared.
>>explain xx;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... XX
PLAN_ID .................. 212281401811784034
ROWS_OUT ................ 11
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select * from t010t1 where a=1 or b='1';


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................ 11
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 51
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality ... 11
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  select_list ............ TRAFODION.SCH.T010T1.A, TRAFODION.SCH.T010T1.B


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T1
REQUESTS_IN .............. 1
ROWS_OUT ................ 11
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 51
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T1
  columns ................ all
  begin_keys(incl)
  end_keys(incl)
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A
  executor_predicates .... ((A = 1) or (B = '1'))

--- SQL operation complete.
>>
>>-- Optimization: with only one disjunct, the selectPred should be empty
>>-- and the executor predicate should contain the non-key predicate
>>prepare xx from select * from t010t1 where a=1 and b='1';

--- SQL command prepared.
>>explain xx;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... XX
PLAN_ID .................. 212281401811856653
ROWS_OUT ................. 1
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select * from t010t1 where a=1 and b='1';


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  olt_optimization ....... used
  max_card_est ........... 1
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 1
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  select_list ............ %(1), %('1')
  input_variables ........ %(1), %('1')


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T1
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 1
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T1
  cache_size ........... 100
  probes ................. 1
  rows_accessed .......... 1
  key_columns ............ A
  executor_predicates .... (B = %('1'))
  begin_key .............. (A = %(1))
  end_key ................ (A = %(1))

--- SQL operation complete.
>>
>>-- should see a full hbase SCAN
>>prepare xx from select * from t010t1 where b='1';

--- SQL command prepared.
>>explain xx;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... XX
PLAN_ID .................. 212281401811932137
ROWS_OUT ................ 10
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select * from t010t1 where b='1';


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................ 10
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality ... 10
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  select_list ............ TRAFODION.SCH.T010T1.A, %('1')
  input_variables ........ %('1')


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T1
REQUESTS_IN .............. 1
ROWS_OUT ................ 10
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T1
  columns ................ all
  begin_keys(incl)
  end_keys(incl)
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A
  executor_predicates .... (B = %('1'))

--- SQL operation complete.
>>
>>-- should see a unique hbase GET 
>>prepare xx from select * from t010t1 where a=1;

--- SQL command prepared.
>>explain xx;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... XX
PLAN_ID .................. 212281401811166774
ROWS_OUT ................. 1
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select * from t010t1 where a = 2;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  olt_optimization ....... used
  max_card_est ........... 1
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 1
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  select_list ............ %(2), TRAFODION.SCH.T010T1.B
  input_variables ........ %(2)


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T1
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 1
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T1
  cache_size ........... 100
  probes ................. 1
  rows_accessed .......... 1
  key_columns ............ A
  begin_key .............. (A = %(2))
  end_key ................ (A = %(2))

--- SQL operation complete.
>>
>>insert into t010t2 values
+>(1, 'a', 1, '1a1'),
+>(1, 'a', 3, '1a3'),
+>(1, 'a', 5, '1a5'),
+>(1, 'c', 1, '1c1'),
+>(2, 'a', 1, '2a1'),
+>(2, 'a', 2, '2a2'),
+>(2, 'c', 3, '2c3'),
+>(4, 'a', 1, '4a1'),
+>(4, 'b', 1, '4b1'),
+>(4, 'b', 2, '4b2');

--- 10 row(s) inserted.
>>
>>insert into t010t3 select * from t010t2;

--- 10 row(s) inserted.
>>
>>prepare x1 from
+>select * from t010t2 where a in (1,4) and b='a' and c = 1;

--- SQL command prepared.
>>
>>execute x1;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          4  a                     1  4a1       

--- 2 row(s) selected.
>>-- expect 1a1, 4a1
>>
>>prepare x2 from
+>select * from t010t2 where a in (1,2,4) and b='a' and (c in (1,3) or c>=5);

--- SQL command prepared.
>>execute x2;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          1  a                     5  1a5       
          2  a                     1  2a1       
          4  a                     1  4a1       

--- 5 row(s) selected.
>>-- expect 1a1, 1a3, 1a5, 2a1, 4a1
>>
>>prepare x3 from
+>select * from t010t2 where a in (1,2,4) and b='a' and c in (1,3);

--- SQL command prepared.
>>execute x3;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          2  a                     1  2a1       
          4  a                     1  4a1       

--- 4 row(s) selected.
>>-- expect 1a1, 1a3, 2a1, 4a1
>>
>>prepare x4 from
+>delete from t010t2 where a in (2,4,6) and b='a' and c in (1,3);

--- SQL command prepared.
>>execute x4;

--- 2 row(s) deleted.
>>-- expect 2 rows deleted, 2a1 and 4a1
>>execute x3;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       

--- 2 row(s) selected.
>>-- expect 1a1, 1a3
>>
>>insert into t010t2 values
+>(2, 'a', 1, '2a1'),
+>(4, 'a', 1, '4a1');

--- 2 row(s) inserted.
>>
>>prepare x5 from 
+>update t010t2 set d='upd' where a=4 and b in ('a', 'b') and c < 2;

--- SQL command prepared.
>>execute x5;

--- 2 row(s) updated.
>>-- execute 2 rows updated, 4a1 and 4b1
>>select * from t010t2;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          1  a                     5  1a5       
          1  c                     1  1c1       
          2  a                     1  2a1       
          2  a                     2  2a2       
          2  c                     3  2c3       
          4  a                     1  upd       
          4  b                     1  upd       
          4  b                     2  4b2       

--- 10 row(s) selected.
>>
>>cqd HBASE_MAX_NUM_SEARCH_KEYS '1';

--- SQL operation complete.
>>
>>prepare y1 from
+>select * from t010t2 where a in (1,4) and b='a' and c = 1;

--- SQL command prepared.
>>execute y1;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          4  a                     1  upd       

--- 2 row(s) selected.
>>-- expect 1a1, 4a1
>>
>>prepare y2 from
+>select * from t010t2 where a in (1,2,4) and b='a' and (c in (1,3) or c>=5);

--- SQL command prepared.
>>execute y2;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          1  a                     5  1a5       
          2  a                     1  2a1       
          4  a                     1  upd       

--- 5 row(s) selected.
>>-- expect 1a1, 1a3, 1a5, 2a1, 4a1
>>
>>prepare y3 from
+>select * from t010t2 where a in (1,2,4) and b='a' and c in (1,3);

--- SQL command prepared.
>>execute y3;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          2  a                     1  2a1       
          4  a                     1  upd       

--- 4 row(s) selected.
>>-- expect 1a1, 1a3, 2a1, 4a1
>>
>>prepare y4 from
+>delete from t010t2 where a in (2,4,6) and b='a' and c in (1,3);

--- SQL command prepared.
>>execute y4;

--- 2 row(s) deleted.
>>-- expect 2 rows deleted, 2a1 and 4a1
>>execute y3;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       

--- 2 row(s) selected.
>>-- expect 1a1, 1a3
>>
>>insert into t010t2 values
+>(2, 'a', 1, '2a1'),
+>(4, 'a', 1, '4a1');

--- 2 row(s) inserted.
>>
>>prepare y5 from 
+>update t010t2 set d='uuu' where a=4 and b in ('a', 'b') and c < 2;

--- SQL command prepared.
>>execute y5;

--- 2 row(s) updated.
>>-- execute 2 rows updated, 4a1 and 4b1
>>select * from t010t2;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          1  a                     5  1a5       
          1  c                     1  1c1       
          2  a                     1  2a1       
          2  a                     2  2a2       
          2  c                     3  2c3       
          4  a                     1  uuu       
          4  b                     1  uuu       
          4  b                     2  4b2       

--- 10 row(s) selected.
>>
>>cqd HBASE_MAX_NUM_SEARCH_KEYS reset;

--- SQL operation complete.
>>
>>explain x1;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X1
PLAN_ID .................. 212281401814649372
ROWS_OUT ................. 2
EST_TOTAL_COST ........... 0
STATEMENT ................ select *
                           from t010t2
                           where a in (1,4) and b='a' and c = 1;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 2
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  select_list ............ TRAFODION.SCH.T010T2.A, %('a'), %(1),
                             TRAFODION.SCH.T010T2.D
  input_variables ........ %('a'), %(1)


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  mdam_disjunct .......... ((A = 1) or (A = 4)) and (B = %('a')) and (C = %(1))

--- SQL operation complete.
>>explain x2;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X2
PLAN_ID .................. 212281401814726603
ROWS_OUT ................. 5
EST_TOTAL_COST ........... 0
STATEMENT ................ select *
                           from t010t2
                           where a in (1,2,4) and b='a' and (c in (1,
                             3) or c>=5);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 5
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 5
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  select_list ............ TRAFODION.SCH.T010T2.A, %('a'),
                             TRAFODION.SCH.T010T2.C, TRAFODION.SCH.T010T2.D
  input_variables ........ %('a')


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 5
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  mdam_disjunct .......... (((A = 1) or (A = 2)) or (A = 4)) and (B = %('a'))
                             and (((C = 1) or (C = 3)) or (C >= 5))

--- SQL operation complete.
>>explain x3;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X3
PLAN_ID .................. 212281401814844640
ROWS_OUT ................. 4
EST_TOTAL_COST ........... 0
STATEMENT ................ select *
                           from t010t2
                           where a in (1,2,4) and b='a' and c in (1,3);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 4
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  select_list ............ TRAFODION.SCH.T010T2.A, %('a'),
                             TRAFODION.SCH.T010T2.C, TRAFODION.SCH.T010T2.D
  input_variables ........ %('a')


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  mdam_disjunct .......... (((A = 1) or (A = 2)) or (A = 4)) and ((C = 1) or (C
                             = 3)) and (B = %('a'))

--- SQL operation complete.
>>explain x4;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X4
PLAN_ID .................. 212281401814939317
ROWS_OUT ................. 4
EST_TOTAL_COST ........... 0.01
STATEMENT ................ delete from t010t2
                           where a in (2,4,6) and b='a' and c in (1,3);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 4        ONLY CHILD 3
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 4
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 4
  total_overflow_size .... 0.00 KB
  upd_action_on_error .... xn_rollback
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  input_variables ........ %('a')


TUPLE_FLOW ================================  SEQ_NO 3        CHILDREN 1, 2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 4
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  join_type .............. inner
  join_method ............ in-order nested


TRAFODION_DELETE ==========================  SEQ_NO 2        NO CHILDREN
TABLE_NAME ............... TRAFODION.SCH.T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  iud_type ............... trafodion_delete TRAFODION.SCH.T010T2
  begin_key .............. (A = A) and (B = %('a')) and (C = C)
  end_key ................ (A = A) and (B = %('a')) and (C = C)


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  executor_predicates .... (B = %('a'))
  mdam_disjunct .......... (((A = 2) or (A = 4)) or (A = 6)) and ((C = 1) or (C
                             = 3)) and (B = %('a'))

--- SQL operation complete.
>>explain x5;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X5
PLAN_ID .................. 212281401815148653
ROWS_OUT ................. 2
EST_TOTAL_COST ........... 0
STATEMENT ................ update t010t2
                           set d='upd'
                           where a=4 and b in ('a', 'b') and c < 2;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  olt_optimization ....... used
  max_card_est ........... 2
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 2
  total_overflow_size .... 0.00 KB
  upd_action_on_error .... xn_rollback
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  input_variables ........ %('upd'), %(4)


TRAFODION_UPDATE ==========================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... TRAFODION.SCH.T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est ........... 2
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  iud_type ............... trafodion_update TRAFODION.SCH.T010T2
  new_rec_expr ........... (D assign %('upd'))
  predicate .............. (C < 2) and ((B = 'a') or (B = 'b'))
  begin_key .............. (A = %(4)) and (B = '<min>') and (C = <min>)
  end_key ................ (A = %(4)) and (B = '<max>') and (C = 2)

--- SQL operation complete.
>>explain y1;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y1
PLAN_ID .................. 212281401815260447
ROWS_OUT ................. 2
EST_TOTAL_COST ........... 0
STATEMENT ................ select *
                           from t010t2
                           where a in (1,4) and b='a' and c = 1;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 2
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  HBASE_MAX_NUM_SEARCH_KE  1
  select_list ............ TRAFODION.SCH.T010T2.A, %('a'), %(1),
                             TRAFODION.SCH.T010T2.D
  input_variables ........ %('a'), %(1)


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  mdam_disjunct .......... ((A = 1) or (A = 4)) and (B = %('a')) and (C = %(1))

--- SQL operation complete.
>>explain y2;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y2
PLAN_ID .................. 212281401815338551
ROWS_OUT ................. 5
EST_TOTAL_COST ........... 0
STATEMENT ................ select *
                           from t010t2
                           where a in (1,2,4) and b='a' and (c in (1,
                             3) or c>=5);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 5
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 5
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  HBASE_MAX_NUM_SEARCH_KE  1
  select_list ............ TRAFODION.SCH.T010T2.A, %('a'),
                             TRAFODION.SCH.T010T2.C, TRAFODION.SCH.T010T2.D
  input_variables ........ %('a')


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 5
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  mdam_disjunct .......... (((A = 1) or (A = 2)) or (A = 4)) and (B = %('a'))
                             and (((C = 1) or (C = 3)) or (C >= 5))

--- SQL operation complete.
>>explain y3;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y3
PLAN_ID .................. 212281401815437794
ROWS_OUT ................. 4
EST_TOTAL_COST ........... 0
STATEMENT ................ select *
                           from t010t2
                           where a in (1,2,4) and b='a' and c in (1,3);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 4
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  HBASE_MAX_NUM_SEARCH_KE  1
  select_list ............ TRAFODION.SCH.T010T2.A, %('a'),
                             TRAFODION.SCH.T010T2.C, TRAFODION.SCH.T010T2.D
  input_variables ........ %('a')


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  mdam_disjunct .......... (((A = 1) or (A = 2)) or (A = 4)) and ((C = 1) or (C
                             = 3)) and (B = %('a'))

--- SQL operation complete.
>>explain y4;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y4
PLAN_ID .................. 212281401815537181
ROWS_OUT ................. 4
EST_TOTAL_COST ........... 0.01
STATEMENT ................ delete from t010t2
                           where a in (2,4,6) and b='a' and c in (1,3);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 4        ONLY CHILD 3
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 4
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 4
  total_overflow_size .... 0.00 KB
  upd_action_on_error .... xn_rollback
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  HBASE_MAX_NUM_SEARCH_KE  1
  input_variables ........ %('a')


TUPLE_FLOW ================================  SEQ_NO 3        CHILDREN 1, 2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 4
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  join_type .............. inner
  join_method ............ in-order nested


TRAFODION_DELETE ==========================  SEQ_NO 2        NO CHILDREN
TABLE_NAME ............... TRAFODION.SCH.T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  iud_type ............... trafodion_delete TRAFODION.SCH.T010T2
  begin_key .............. (A = A) and (B = %('a')) and (C = C)
  end_key ................ (A = A) and (B = %('a')) and (C = C)


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  executor_predicates .... (B = %('a'))
  mdam_disjunct .......... (((A = 2) or (A = 4)) or (A = 6)) and ((C = 1) or (C
                             = 3)) and (B = %('a'))

--- SQL operation complete.
>>explain y5;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y5
PLAN_ID .................. 212281401815740510
ROWS_OUT ................. 2
EST_TOTAL_COST ........... 0
STATEMENT ................ update t010t2
                           set d='uuu'
                           where a=4 and b in ('a', 'b') and c < 2;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  olt_optimization ....... used
  max_card_est ........... 2
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 2
  total_overflow_size .... 0.00 KB
  upd_action_on_error .... xn_rollback
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  HBASE_MAX_NUM_SEARCH_KE  1
  input_variables ........ %('uuu'), %(4)


TRAFODION_UPDATE ==========================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... TRAFODION.SCH.T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est ........... 2
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  iud_type ............... trafodion_update TRAFODION.SCH.T010T2
  new_rec_expr ........... (D assign %('uuu'))
  predicate .............. (C < 2) and ((B = 'a') or (B = 'b'))
  begin_key .............. (A = %(4)) and (B = '<min>') and (C = <min>)
  end_key ................ (A = %(4)) and (B = '<max>') and (C = 2)

--- SQL operation complete.
>>
>>select "_SALT_", * from t010t3 order by a,b,c;

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         2            1  a                     1  1a1       
         2            1  a                     3  1a3       
         2            1  a                     5  1a5       
         1            1  c                     1  1c1       
         3            2  a                     1  2a1       
         3            2  a                     2  2a2       
         0            2  c                     3  2c3       
         2            4  a                     1  4a1       
         1            4  b                     1  4b1       
         1            4  b                     2  4b2       

--- 10 row(s) selected.
>>select "_SALT_", * from t010t3 where a=1 and b='c';

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         1            1  c                     1  1c1       

--- 1 row(s) selected.
>>
>>update t010t3 set d='2axu' where a=2 and b='a';

--- 2 row(s) updated.
>>-- 2 rows updated
>>update t010t3 set d='4b1u' where a=4 and b='b' and c <= 1;

--- 1 row(s) updated.
>>-- 1 row updated
>>update t010t3 set a=3 where a=2;

--- 3 row(s) updated.
>>-- 3 rows updated
>>delete from t010t3 where a=3 and b='c' and c=3;

--- 1 row(s) deleted.
>>-- 1 row deleted
>>delete from t010t3 where d like '2%u %';

--- 2 row(s) deleted.
>>-- 2 rows deleted
>>select "_SALT_", * from t010t3;

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         1            1  c                     1  1c1       
         1            4  b                     1  4b1u      
         1            4  b                     2  4b2       
         2            1  a                     1  1a1       
         2            1  a                     3  1a3       
         2            1  a                     5  1a5       
         2            4  a                     1  4a1       

--- 7 row(s) selected.
>>-- 7 rows
>>merge into t010t3
+>  using (select * from t010t2) as src
+>  on ((src.a, src.b, src.c) = (a,b,c))
+>when matched
+>  then update set d = src.d
+>when not matched
+>  then insert values (src.a, src.b, src.c, src.d)
+>;

--- 10 row(s) updated.
>>-- 10 rows updated
>>select "_SALT_", * from t010t2 natural join t010t3 order by a,b,c;

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         2            1  a                     1  1a1       
         2            1  a                     3  1a3       
         2            1  a                     5  1a5       
         1            1  c                     1  1c1       
         3            2  a                     1  2a1       
         3            2  a                     2  2a2       
         0            2  c                     3  2c3       
         2            4  a                     1  uuu       
         1            4  b                     1  uuu       
         1            4  b                     2  4b2       

--- 10 row(s) selected.
>>-- expect 10 rows, same as each individual table
>>
>>select "_SALT_", * from table(table t010t3, partition number 4);

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         3            2  a                     1  2a1       
         3            2  a                     2  2a2       

--- 2 row(s) selected.
>>select "_SALT_", * from table(table t010t3, partition number from 1 to 3);

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         0            2  c                     3  2c3       
         1            1  c                     1  1c1       
         1            4  b                     1  uuu       
         1            4  b                     2  4b2       
         2            1  a                     1  1a1       
         2            1  a                     3  1a3       
         2            1  a                     5  1a5       
         2            4  a                     1  uuu       

--- 8 row(s) selected.
>>-- 2 statements above must return 10 rows total
>>
>>
>>-- query_cache off, mdam_scan_method off
>>cqd query_cache '0';

--- SQL operation complete.
>>cqd mdam_scan_method 'OFF';

--- SQL operation complete.
>>obey TEST010(clean_up);
>>--------------------------------------------------------------------------
>>drop table if exists t010t1;

--- SQL operation complete.
>>drop table if exists t010t2;

--- SQL operation complete.
>>drop table if exists t010t3;

--- SQL operation complete.
>>
>>obey TEST010(tests);
>>--------------------------------------------------------------------------
>>
>>create table if not exists t010t1 (a int not null, b char(10), primary key(a));

--- SQL operation complete.
>>create table if not exists t010t2 (a int not null, b char(10) not null, c int not null, d char(10), primary key(a,b,c));

--- SQL operation complete.
>>create table if not exists t010t3 (a int not null, b char(10) not null, c int not null, d char(10), primary key(a,b,c))
+>  salt using 4 partitions on (a,b);

--- SQL operation complete.
>>
>>invoke t010t1;

-- Definition of Trafodion table TRAFODION.SCH.T010T1
-- Definition current  Thu Oct 30 04:03:53 2014

  (
    A                                INT NO DEFAULT NOT NULL NOT DROPPABLE
  , B                                CHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT DEFAULT NULL
  )

--- SQL operation complete.
>>invoke hbase."_CELL_"."TRAFODION.SCH.T010T1";

-- Definition of Trafodion table HBASE."_CELL_"."TRAFODION.SCH.T010T1"
-- Definition current  Thu Oct 30 04:03:53 2014

  (
    ROW_ID                           VARCHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , COL_FAMILY                       VARCHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , COL_NAME                         VARCHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , COL_TIMESTAMP                    LARGEINT NO DEFAULT NOT NULL NOT DROPPABLE
  , COL_VALUE                        VARCHAR(20) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  )

--- SQL operation complete.
>>invoke hbase."_ROW_"."TRAFODION.SCH.T010T1";

-- Definition of Trafodion table HBASE."_ROW_"."TRAFODION.SCH.T010T1"
-- Definition current  Thu Oct 30 04:03:53 2014

  (
    ROW_ID                           VARCHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , COLUMN_DETAILS                   VARCHAR(60) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  )

--- SQL operation complete.
>>
>>insert into t010t1 values (1, 'a'), (2, 'b'), (3, 'c');

--- 3 row(s) inserted.
>>
>>select * from t010t1;

A            B         
-----------  ----------

          1  a         
          2  b         
          3  c         

--- 3 row(s) selected.
>>
>>select * from t010t1 where a = 2;

A            B         
-----------  ----------

          2  b         

--- 1 row(s) selected.
>>
>>select * from t010t1 where a = 2 or a = 3;

A            B         
-----------  ----------

          2  b         
          3  c         

--- 2 row(s) selected.
>>
>>delete from t010t1 where a = 4;

--- 0 row(s) deleted.
>>
>>select * from t010t1;

A            B         
-----------  ----------

          1  a         
          2  b         
          3  c         

--- 3 row(s) selected.
>>
>>delete from t010t1 where a = 2;

--- 1 row(s) deleted.
>>
>>select * from t010t1;

A            B         
-----------  ----------

          1  a         
          3  c         

--- 2 row(s) selected.
>>
>>select converttohex(cast(row_id as char(4))) rowid,
+>          converttohex(cast(col_family as char(2))) colfamily,
+>          converttohex(cast(col_name as char(1))) colname,
+>          converttohex(cast(col_value as char(4))) colvalue
+>                from hbase."_CELL_"."TRAFODION.SCH.T010T1";

ROWID     COLFAMILY  COLNAME  COLVALUE
--------  ---------  -------  --------

80000001  2331       01       01000000
80000001  2331       02       00612020
80000003  2331       01       03000000
80000003  2331       02       00632020

--- 4 row(s) selected.
>>
>>select converttohex(cast(row_id as char(4))) rowid,
+>          converttohex(cast(col_family as char(2))) colfamily,
+>          converttohex(cast(col_name as char(1))) colname,
+>          converttohex(cast(col_value as char(4))) colvalue
+>                from hbase."_CELL_"."TRAFODION.SCH.T010T1"
+>          where converttohex(cast(row_id as char(4))) = '80000001';

ROWID     COLFAMILY  COLNAME  COLVALUE
--------  ---------  -------  --------

80000001  2331       01       01000000
80000001  2331       02       00612020

--- 2 row(s) selected.
>>
>>select converttohex(cast(row_id as char(4))) rowid,
+>          converttohex(cast(column_details as char(40))) coldetails
+>                 from hbase."_ROW_"."TRAFODION.SCH.T010T1";

ROWID     COLDETAILS
--------  --------------------------------------------------------------------------------

80000001  040023313A010400000001000000040023313A020B00000000612020202020202020202020202020
80000003  040023313A010400000003000000040023313A020B00000000632020202020202020202020202020

--- 2 row(s) selected.
>>select converttohex(cast(row_id as char(4))) rowid,
+>          converttohex(cast(column_details as char(40))) coldetails
+>                 from hbase."_ROW_"."TRAFODION.SCH.T010T1"
+>          where converttohex(cast(row_id as char(4))) = '80000001';

ROWID     COLDETAILS
--------  --------------------------------------------------------------------------------

80000001  040023313A010400000001000000040023313A020B00000000612020202020202020202020202020

--- 1 row(s) selected.
>>
>>-------------------
>>-- check query plan
>>-------------------
>>
>>-- no sort operator should present when order by on primary key column
>>prepare xx from select * from t010t1 order by a;

--- SQL command prepared.
>>explain options 'f' xx;

LC   RC   OP   OPERATOR              OPT       DESCRIPTION           CARD
---- ---- ---- --------------------  --------  --------------------  ---------

1    .    2    root                                                  1.00E+002
.    .    1    trafodion_scan                  T010T1                1.00E+002

--- SQL operation complete.
>>
>>-- should see a sort when order by on non key column
>>prepare xx from select * from t010t1 order by b;

--- SQL command prepared.
>>explain options 'f' xx;

LC   RC   OP   OPERATOR              OPT       DESCRIPTION           CARD
---- ---- ---- --------------------  --------  --------------------  ---------

2    .    3    root                                                  1.00E+002
1    .    2    sort                                                  1.00E+002
.    .    1    trafodion_scan                  T010T1                1.00E+002

--- SQL operation complete.
>>
>>-- selectPred should present due to the 2nd disjunct b='1'
>>prepare xx from select * from t010t1 where a=1 or b='1';

--- SQL command prepared.
>>explain xx;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... XX
PLAN_ID .................. 212281401833554343
ROWS_OUT ................ 11
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select * from t010t1 where a=1 or b='1';


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................ 11
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 51
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality ... 11
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... OFF
  select_list ............ TRAFODION.SCH.T010T1.A, TRAFODION.SCH.T010T1.B


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T1
REQUESTS_IN .............. 1
ROWS_OUT ................ 11
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 51
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T1
  columns ................ all
  begin_keys(incl)
  end_keys(incl)
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A
  executor_predicates .... ((A = 1) or (B = '1'))

--- SQL operation complete.
>>
>>-- Optimization: with only one disjunct, the selectPred should be empty
>>-- and the executor predicate should contain the non-key predicate
>>prepare xx from select * from t010t1 where a=1 and b='1';

--- SQL command prepared.
>>explain xx;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... XX
PLAN_ID .................. 212281401833622166
ROWS_OUT ................. 1
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select * from t010t1 where a=1 and b='1';


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  olt_optimization ....... used
  max_card_est ........... 1
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 1
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... OFF
  select_list ............ 1, '1'


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T1
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 1
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T1
  columns ................ all
  unique_rows ............ 1
  cache_size ........... 100
  probes ................. 1
  rows_accessed .......... 1
  key_columns ............ A
  executor_predicates .... (B = '1')

--- SQL operation complete.
>>
>>-- should see a full hbase SCAN
>>prepare xx from select * from t010t1 where b='1';

--- SQL command prepared.
>>explain xx;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... XX
PLAN_ID .................. 212281401833687356
ROWS_OUT ................ 10
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select * from t010t1 where b='1';


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................ 10
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality ... 10
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... OFF
  select_list ............ TRAFODION.SCH.T010T1.A, '1'


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T1
REQUESTS_IN .............. 1
ROWS_OUT ................ 10
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T1
  columns ................ all
  begin_keys(incl)
  end_keys(incl)
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A
  executor_predicates .... (B = '1')

--- SQL operation complete.
>>
>>-- should see a unique hbase GET 
>>prepare xx from select * from t010t1 where a=1;

--- SQL command prepared.
>>explain xx;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... XX
PLAN_ID .................. 212281401833752687
ROWS_OUT ................. 1
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select * from t010t1 where a=1;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  olt_optimization ....... used
  max_card_est ........... 1
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 1
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... OFF
  select_list ............ 1, TRAFODION.SCH.T010T1.B


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T1
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 1
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T1
  columns ................ all
  unique_rows ............ 1
  cache_size ........... 100
  probes ................. 1
  rows_accessed .......... 1
  key_columns ............ A

--- SQL operation complete.
>>
>>insert into t010t2 values
+>(1, 'a', 1, '1a1'),
+>(1, 'a', 3, '1a3'),
+>(1, 'a', 5, '1a5'),
+>(1, 'c', 1, '1c1'),
+>(2, 'a', 1, '2a1'),
+>(2, 'a', 2, '2a2'),
+>(2, 'c', 3, '2c3'),
+>(4, 'a', 1, '4a1'),
+>(4, 'b', 1, '4b1'),
+>(4, 'b', 2, '4b2');

--- 10 row(s) inserted.
>>
>>insert into t010t3 select * from t010t2;

--- 10 row(s) inserted.
>>
>>prepare x1 from
+>select * from t010t2 where a in (1,4) and b='a' and c = 1;

--- SQL command prepared.
>>
>>execute x1;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          4  a                     1  4a1       

--- 2 row(s) selected.
>>-- expect 1a1, 4a1
>>
>>prepare x2 from
+>select * from t010t2 where a in (1,2,4) and b='a' and (c in (1,3) or c>=5);

--- SQL command prepared.
>>execute x2;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     5  1a5       
          1  a                     1  1a1       
          1  a                     3  1a3       
          2  a                     1  2a1       
          4  a                     1  4a1       

--- 5 row(s) selected.
>>-- expect 1a1, 1a3, 1a5, 2a1, 4a1
>>
>>prepare x3 from
+>select * from t010t2 where a in (1,2,4) and b='a' and c in (1,3);

--- SQL command prepared.
>>execute x3;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          2  a                     1  2a1       
          4  a                     1  4a1       

--- 4 row(s) selected.
>>-- expect 1a1, 1a3, 2a1, 4a1
>>
>>prepare x4 from
+>delete from t010t2 where a in (2,4,6) and b='a' and c in (1,3);

--- SQL command prepared.
>>execute x4;

--- 2 row(s) deleted.
>>-- expect 2 rows deleted, 2a1 and 4a1
>>execute x3;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       

--- 2 row(s) selected.
>>-- expect 1a1, 1a3
>>
>>insert into t010t2 values
+>(2, 'a', 1, '2a1'),
+>(4, 'a', 1, '4a1');

--- 2 row(s) inserted.
>>
>>prepare x5 from 
+>update t010t2 set d='upd' where a=4 and b in ('a', 'b') and c < 2;

--- SQL command prepared.
>>execute x5;

--- 2 row(s) updated.
>>-- execute 2 rows updated, 4a1 and 4b1
>>select * from t010t2;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          1  a                     5  1a5       
          1  c                     1  1c1       
          2  a                     1  2a1       
          2  a                     2  2a2       
          2  c                     3  2c3       
          4  a                     1  upd       
          4  b                     1  upd       
          4  b                     2  4b2       

--- 10 row(s) selected.
>>
>>cqd HBASE_MAX_NUM_SEARCH_KEYS '1';

--- SQL operation complete.
>>
>>prepare y1 from
+>select * from t010t2 where a in (1,4) and b='a' and c = 1;

--- SQL command prepared.
>>execute y1;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          4  a                     1  upd       

--- 2 row(s) selected.
>>-- expect 1a1, 4a1
>>
>>prepare y2 from
+>select * from t010t2 where a in (1,2,4) and b='a' and (c in (1,3) or c>=5);

--- SQL command prepared.
>>execute y2;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          1  a                     5  1a5       
          2  a                     1  2a1       
          4  a                     1  upd       

--- 5 row(s) selected.
>>-- expect 1a1, 1a3, 1a5, 2a1, 4a1
>>
>>prepare y3 from
+>select * from t010t2 where a in (1,2,4) and b='a' and c in (1,3);

--- SQL command prepared.
>>execute y3;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          2  a                     1  2a1       
          4  a                     1  upd       

--- 4 row(s) selected.
>>-- expect 1a1, 1a3, 2a1, 4a1
>>
>>prepare y4 from
+>delete from t010t2 where a in (2,4,6) and b='a' and c in (1,3);

--- SQL command prepared.
>>execute y4;

--- 2 row(s) deleted.
>>-- expect 2 rows deleted, 2a1 and 4a1
>>execute y3;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       

--- 2 row(s) selected.
>>-- expect 1a1, 1a3
>>
>>insert into t010t2 values
+>(2, 'a', 1, '2a1'),
+>(4, 'a', 1, '4a1');

--- 2 row(s) inserted.
>>
>>prepare y5 from 
+>update t010t2 set d='uuu' where a=4 and b in ('a', 'b') and c < 2;

--- SQL command prepared.
>>execute y5;

--- 2 row(s) updated.
>>-- execute 2 rows updated, 4a1 and 4b1
>>select * from t010t2;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          1  a                     5  1a5       
          1  c                     1  1c1       
          2  a                     1  2a1       
          2  a                     2  2a2       
          2  c                     3  2c3       
          4  a                     1  uuu       
          4  b                     1  uuu       
          4  b                     2  4b2       

--- 10 row(s) selected.
>>
>>cqd HBASE_MAX_NUM_SEARCH_KEYS reset;

--- SQL operation complete.
>>
>>explain x1;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X1
PLAN_ID .................. 212281401836144048
ROWS_OUT ................. 2
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select *
                           from t010t2
                           where a in (1,4) and b='a' and c = 1;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 2
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... OFF
  select_list ............ TRAFODION.SCH.T010T2.A, 'a', 1,
                             TRAFODION.SCH.T010T2.D


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T2
  columns ................ all
  unique_rows ............ 1,a,1
  unique_rows ............ 4,a,1
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C

--- SQL operation complete.
>>explain x2;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X2
PLAN_ID .................. 212281401836187335
ROWS_OUT ................. 5
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select *
                           from t010t2
                           where a in (1,2,4) and b='a' and (c in (1,
                             3) or c>=5);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 5
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 5
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... OFF
  select_list ............ TRAFODION.SCH.T010T2.A, 'a', TRAFODION.SCH.T010T2.C,
                             TRAFODION.SCH.T010T2.D


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 5
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T2
  columns ................ all
  unique_rows ............ 1,a,1
  unique_rows ............ 1,a,3
  unique_rows ............ 2,a,1
  unique_rows ............ 2,a,3
  unique_rows ............ 4,a,1
  unique_rows ............ 4,a,3
  columns ................ all
  begin_keys(incl) ....... 1,a,5
  end_keys(incl) ......... 1,a,2147483647
  columns ................ all
  begin_keys(incl) ....... 2,a,5
  end_keys(incl) ......... 2,a,2147483647
  columns ................ all
  begin_keys(incl) ....... 4,a,5
  end_keys(incl) ......... 4,a,2147483647
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C

--- SQL operation complete.
>>explain x3;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X3
PLAN_ID .................. 212281401836234023
ROWS_OUT ................. 4
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select *
                           from t010t2
                           where a in (1,2,4) and b='a' and c in (1,3);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 4
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... OFF
  select_list ............ TRAFODION.SCH.T010T2.A, 'a', TRAFODION.SCH.T010T2.C,
                             TRAFODION.SCH.T010T2.D


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T2
  columns ................ all
  unique_rows ............ 1,a,1
  unique_rows ............ 1,a,3
  unique_rows ............ 2,a,1
  unique_rows ............ 2,a,3
  unique_rows ............ 4,a,1
  unique_rows ............ 4,a,3
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C

--- SQL operation complete.
>>explain x4;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X4
PLAN_ID .................. 212281401836279511
ROWS_OUT ................. 4
EST_TOTAL_COST ........... 0.01
STATEMENT ................ delete from t010t2
                           where a in (2,4,6) and b='a' and c in (1,3);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 4        ONLY CHILD 3
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 4
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 4
  total_overflow_size .... 0.00 KB
  upd_action_on_error .... xn_rollback
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... OFF


TUPLE_FLOW ================================  SEQ_NO 3        CHILDREN 1, 2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 4
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  join_type .............. inner
  join_method ............ in-order nested


TRAFODION_DELETE ==========================  SEQ_NO 2        NO CHILDREN
TABLE_NAME ............... TRAFODION.SCH.T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  iud_type ............... trafodion_delete TRAFODION.SCH.T010T2
  begin_key .............. (A = A) and (B = 'a') and (C = C)
  end_key ................ (A = A) and (B = 'a') and (C = C)


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T2
  columns ................ all
  unique_rows ............ 2,a,1
  unique_rows ............ 2,a,3
  unique_rows ............ 4,a,1
  unique_rows ............ 4,a,3
  unique_rows ............ 6,a,1
  unique_rows ............ 6,a,3
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  executor_predicates .... (B = 'a')

--- SQL operation complete.
>>explain x5;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X5
PLAN_ID .................. 212281401836378810
ROWS_OUT ................. 2
EST_TOTAL_COST ........... 0
STATEMENT ................ update t010t2
                           set d='upd'
                           where a=4 and b in ('a', 'b') and c < 2;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  olt_optimization ....... used
  max_card_est ........... 2
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 2
  total_overflow_size .... 0.00 KB
  upd_action_on_error .... xn_rollback
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... OFF


TRAFODION_UPDATE ==========================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... TRAFODION.SCH.T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est ........... 2
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  iud_type ............... trafodion_update TRAFODION.SCH.T010T2
  columns ................ all
  begin_keys(incl) ....... 4,a,-2147483648
  end_keys(excl) ......... 4,a,2
  columns ................ all
  begin_keys(incl) ....... 4,b,-2147483648
  end_keys(excl) ......... 4,b,2
  new_rec_expr ........... (D assign 'upd')

--- SQL operation complete.
>>explain y1;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y1
PLAN_ID .................. 212281401836464860
ROWS_OUT ................. 2
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select *
                           from t010t2
                           where a in (1,4) and b='a' and c = 1;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 2
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... OFF
  HBASE_MAX_NUM_SEARCH_KE  1
  select_list ............ TRAFODION.SCH.T010T2.A, 'a', 1,
                             TRAFODION.SCH.T010T2.D


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T2
  columns ................ all
  begin_keys(incl)
  end_keys(incl)
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  executor_predicates .... (B = 'a') and (C = 1) and ((A = 1) or (A = 4))

--- SQL operation complete.
>>explain y2;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y2
PLAN_ID .................. 212281401836508728
ROWS_OUT ................. 5
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select *
                           from t010t2
                           where a in (1,2,4) and b='a' and (c in (1,
                             3) or c>=5);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 5
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 5
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... OFF
  HBASE_MAX_NUM_SEARCH_KE  1
  select_list ............ TRAFODION.SCH.T010T2.A, 'a', TRAFODION.SCH.T010T2.C,
                             TRAFODION.SCH.T010T2.D


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 5
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T2
  columns ................ all
  begin_keys(incl)
  end_keys(incl)
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  executor_predicates .... (B = 'a') and (((A = 1) or (A = 2)) or (A = 4)) and
                             (((C = 1) or (C = 3)) or (C >= 5))

--- SQL operation complete.
>>explain y3;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y3
PLAN_ID .................. 212281401836550936
ROWS_OUT ................. 4
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select *
                           from t010t2
                           where a in (1,2,4) and b='a' and c in (1,3);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 4
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... OFF
  HBASE_MAX_NUM_SEARCH_KE  1
  select_list ............ TRAFODION.SCH.T010T2.A, 'a', TRAFODION.SCH.T010T2.C,
                             TRAFODION.SCH.T010T2.D


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T2
  columns ................ all
  begin_keys(incl)
  end_keys(incl)
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  executor_predicates .... (B = 'a') and (((A = 1) or (A = 2)) or (A = 4)) and
                             ((C = 1) or (C = 3))

--- SQL operation complete.
>>explain y4;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y4
PLAN_ID .................. 212281401836597247
ROWS_OUT ................. 4
EST_TOTAL_COST ........... 0.01
STATEMENT ................ delete from t010t2
                           where a in (2,4,6) and b='a' and c in (1,3);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 4        ONLY CHILD 3
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 4
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 4
  total_overflow_size .... 0.00 KB
  upd_action_on_error .... xn_rollback
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... OFF
  HBASE_MAX_NUM_SEARCH_KE  1


TUPLE_FLOW ================================  SEQ_NO 3        CHILDREN 1, 2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 4
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  join_type .............. inner
  join_method ............ in-order nested


TRAFODION_DELETE ==========================  SEQ_NO 2        NO CHILDREN
TABLE_NAME ............... TRAFODION.SCH.T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  iud_type ............... trafodion_delete TRAFODION.SCH.T010T2
  begin_key .............. (A = A) and (B = 'a') and (C = C)
  end_key ................ (A = A) and (B = 'a') and (C = C)


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T2
  columns ................ all
  begin_keys(incl)
  end_keys(incl)
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  executor_predicates .... (B = 'a') and (((A = 2) or (A = 4)) or (A = 6)) and
                             ((C = 1) or (C = 3))

--- SQL operation complete.
>>explain y5;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y5
PLAN_ID .................. 212281401836702643
ROWS_OUT ................. 2
EST_TOTAL_COST ........... 0
STATEMENT ................ update t010t2
                           set d='uuu'
                           where a=4 and b in ('a', 'b') and c < 2;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  olt_optimization ....... used
  max_card_est ........... 2
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 2
  total_overflow_size .... 0.00 KB
  upd_action_on_error .... xn_rollback
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... OFF
  HBASE_MAX_NUM_SEARCH_KE  1


TRAFODION_UPDATE ==========================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... TRAFODION.SCH.T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est ........... 2
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  iud_type ............... trafodion_update TRAFODION.SCH.T010T2
  columns ................ all
  begin_keys(incl) ....... 4,,-2147483648
  end_keys(incl) ......... 4,??????????,2
  new_rec_expr ........... (D assign 'uuu')
  predicate .............. ((B = 'a') or (B = 'b')) and (C < 2)

--- SQL operation complete.
>>
>>select "_SALT_", * from t010t3 order by a,b,c;

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         2            1  a                     1  1a1       
         2            1  a                     3  1a3       
         2            1  a                     5  1a5       
         1            1  c                     1  1c1       
         3            2  a                     1  2a1       
         3            2  a                     2  2a2       
         0            2  c                     3  2c3       
         2            4  a                     1  4a1       
         1            4  b                     1  4b1       
         1            4  b                     2  4b2       

--- 10 row(s) selected.
>>select "_SALT_", * from t010t3 where a=1 and b='c';

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         1            1  c                     1  1c1       

--- 1 row(s) selected.
>>
>>update t010t3 set d='2axu' where a=2 and b='a';

--- 2 row(s) updated.
>>-- 2 rows updated
>>update t010t3 set d='4b1u' where a=4 and b='b' and c <= 1;

--- 1 row(s) updated.
>>-- 1 row updated
>>update t010t3 set a=3 where a=2;

--- 3 row(s) updated.
>>-- 3 rows updated
>>delete from t010t3 where a=3 and b='c' and c=3;

--- 1 row(s) deleted.
>>-- 1 row deleted
>>delete from t010t3 where d like '2%u %';

--- 2 row(s) deleted.
>>-- 2 rows deleted
>>select "_SALT_", * from t010t3;

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         1            1  c                     1  1c1       
         1            4  b                     1  4b1u      
         1            4  b                     2  4b2       
         2            1  a                     1  1a1       
         2            1  a                     3  1a3       
         2            1  a                     5  1a5       
         2            4  a                     1  4a1       

--- 7 row(s) selected.
>>-- 7 rows
>>merge into t010t3
+>  using (select * from t010t2) as src
+>  on ((src.a, src.b, src.c) = (a,b,c))
+>when matched
+>  then update set d = src.d
+>when not matched
+>  then insert values (src.a, src.b, src.c, src.d)
+>;

--- 10 row(s) updated.
>>-- 10 rows updated
>>select "_SALT_", * from t010t2 natural join t010t3 order by a,b,c;

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         2            1  a                     1  1a1       
         2            1  a                     3  1a3       
         2            1  a                     5  1a5       
         1            1  c                     1  1c1       
         3            2  a                     1  2a1       
         3            2  a                     2  2a2       
         0            2  c                     3  2c3       
         2            4  a                     1  uuu       
         1            4  b                     1  uuu       
         1            4  b                     2  4b2       

--- 10 row(s) selected.
>>-- expect 10 rows, same as each individual table
>>
>>select "_SALT_", * from table(table t010t3, partition number 4);

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         3            2  a                     1  2a1       
         3            2  a                     2  2a2       

--- 2 row(s) selected.
>>select "_SALT_", * from table(table t010t3, partition number from 1 to 3);

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         0            2  c                     3  2c3       
         1            1  c                     1  1c1       
         1            4  b                     1  uuu       
         1            4  b                     2  4b2       
         2            1  a                     1  1a1       
         2            1  a                     3  1a3       
         2            1  a                     5  1a5       
         2            4  a                     1  uuu       

--- 8 row(s) selected.
>>-- 2 statements above must return 10 rows total
>>
>>
>>-- query_cache on, mdam_scan_method off
>>cqd query_cache '1024';

--- SQL operation complete.
>>cqd mdam_scan_method 'OFF';

--- SQL operation complete.
>>obey TEST010(clean_up);
>>--------------------------------------------------------------------------
>>drop table if exists t010t1;

--- SQL operation complete.
>>drop table if exists t010t2;

--- SQL operation complete.
>>drop table if exists t010t3;

--- SQL operation complete.
>>
>>obey TEST010(tests);
>>--------------------------------------------------------------------------
>>
>>create table if not exists t010t1 (a int not null, b char(10), primary key(a));

--- SQL operation complete.
>>create table if not exists t010t2 (a int not null, b char(10) not null, c int not null, d char(10), primary key(a,b,c));

--- SQL operation complete.
>>create table if not exists t010t3 (a int not null, b char(10) not null, c int not null, d char(10), primary key(a,b,c))
+>  salt using 4 partitions on (a,b);

--- SQL operation complete.
>>
>>invoke t010t1;

-- Definition of Trafodion table TRAFODION.SCH.T010T1
-- Definition current  Thu Oct 30 04:04:15 2014

  (
    A                                INT NO DEFAULT NOT NULL NOT DROPPABLE
  , B                                CHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT DEFAULT NULL
  )

--- SQL operation complete.
>>invoke hbase."_CELL_"."TRAFODION.SCH.T010T1";

-- Definition of Trafodion table HBASE."_CELL_"."TRAFODION.SCH.T010T1"
-- Definition current  Thu Oct 30 04:04:15 2014

  (
    ROW_ID                           VARCHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , COL_FAMILY                       VARCHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , COL_NAME                         VARCHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , COL_TIMESTAMP                    LARGEINT NO DEFAULT NOT NULL NOT DROPPABLE
  , COL_VALUE                        VARCHAR(20) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  )

--- SQL operation complete.
>>invoke hbase."_ROW_"."TRAFODION.SCH.T010T1";

-- Definition of Trafodion table HBASE."_ROW_"."TRAFODION.SCH.T010T1"
-- Definition current  Thu Oct 30 04:04:15 2014

  (
    ROW_ID                           VARCHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , COLUMN_DETAILS                   VARCHAR(60) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  )

--- SQL operation complete.
>>
>>insert into t010t1 values (1, 'a'), (2, 'b'), (3, 'c');

--- 3 row(s) inserted.
>>
>>select * from t010t1;

A            B         
-----------  ----------

          1  a         
          2  b         
          3  c         

--- 3 row(s) selected.
>>
>>select * from t010t1 where a = 2;

A            B         
-----------  ----------

          2  b         

--- 1 row(s) selected.
>>
>>select * from t010t1 where a = 2 or a = 3;

A            B         
-----------  ----------

          2  b         
          3  c         

--- 2 row(s) selected.
>>
>>delete from t010t1 where a = 4;

--- 0 row(s) deleted.
>>
>>select * from t010t1;

A            B         
-----------  ----------

          1  a         
          2  b         
          3  c         

--- 3 row(s) selected.
>>
>>delete from t010t1 where a = 2;

--- 1 row(s) deleted.
>>
>>select * from t010t1;

A            B         
-----------  ----------

          1  a         
          3  c         

--- 2 row(s) selected.
>>
>>select converttohex(cast(row_id as char(4))) rowid,
+>          converttohex(cast(col_family as char(2))) colfamily,
+>          converttohex(cast(col_name as char(1))) colname,
+>          converttohex(cast(col_value as char(4))) colvalue
+>                from hbase."_CELL_"."TRAFODION.SCH.T010T1";

ROWID     COLFAMILY  COLNAME  COLVALUE
--------  ---------  -------  --------

80000001  2331       01       01000000
80000001  2331       02       00612020
80000003  2331       01       03000000
80000003  2331       02       00632020

--- 4 row(s) selected.
>>
>>select converttohex(cast(row_id as char(4))) rowid,
+>          converttohex(cast(col_family as char(2))) colfamily,
+>          converttohex(cast(col_name as char(1))) colname,
+>          converttohex(cast(col_value as char(4))) colvalue
+>                from hbase."_CELL_"."TRAFODION.SCH.T010T1"
+>          where converttohex(cast(row_id as char(4))) = '80000001';

ROWID     COLFAMILY  COLNAME  COLVALUE
--------  ---------  -------  --------

80000001  2331       01       01000000
80000001  2331       02       00612020

--- 2 row(s) selected.
>>
>>select converttohex(cast(row_id as char(4))) rowid,
+>          converttohex(cast(column_details as char(40))) coldetails
+>                 from hbase."_ROW_"."TRAFODION.SCH.T010T1";

ROWID     COLDETAILS
--------  --------------------------------------------------------------------------------

80000001  040023313A010400000001000000040023313A020B00000000612020202020202020202020202020
80000003  040023313A010400000003000000040023313A020B00000000632020202020202020202020202020

--- 2 row(s) selected.
>>select converttohex(cast(row_id as char(4))) rowid,
+>          converttohex(cast(column_details as char(40))) coldetails
+>                 from hbase."_ROW_"."TRAFODION.SCH.T010T1"
+>          where converttohex(cast(row_id as char(4))) = '80000001';

ROWID     COLDETAILS
--------  --------------------------------------------------------------------------------

80000001  040023313A010400000001000000040023313A020B00000000612020202020202020202020202020

--- 1 row(s) selected.
>>
>>-------------------
>>-- check query plan
>>-------------------
>>
>>-- no sort operator should present when order by on primary key column
>>prepare xx from select * from t010t1 order by a;

--- SQL command prepared.
>>explain options 'f' xx;

LC   RC   OP   OPERATOR              OPT       DESCRIPTION           CARD
---- ---- ---- --------------------  --------  --------------------  ---------

1    .    2    root                                                  1.00E+002
.    .    1    trafodion_scan                  T010T1                1.00E+002

--- SQL operation complete.
>>
>>-- should see a sort when order by on non key column
>>prepare xx from select * from t010t1 order by b;

--- SQL command prepared.
>>explain options 'f' xx;

LC   RC   OP   OPERATOR              OPT       DESCRIPTION           CARD
---- ---- ---- --------------------  --------  --------------------  ---------

2    .    3    root                                                  1.00E+002
1    .    2    sort                                                  1.00E+002
.    .    1    trafodion_scan                  T010T1                1.00E+002

--- SQL operation complete.
>>
>>-- selectPred should present due to the 2nd disjunct b='1'
>>prepare xx from select * from t010t1 where a=1 or b='1';

--- SQL command prepared.
>>explain xx;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... XX
PLAN_ID .................. 212281401855942153
ROWS_OUT ................ 11
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select * from t010t1 where a=1 or b='1';


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................ 11
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 51
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality ... 11
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... OFF
  select_list ............ TRAFODION.SCH.T010T1.A, TRAFODION.SCH.T010T1.B


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T1
REQUESTS_IN .............. 1
ROWS_OUT ................ 11
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 51
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T1
  columns ................ all
  begin_keys(incl)
  end_keys(incl)
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A
  executor_predicates .... ((A = 1) or (B = '1'))

--- SQL operation complete.
>>
>>-- Optimization: with only one disjunct, the selectPred should be empty
>>-- and the executor predicate should contain the non-key predicate
>>prepare xx from select * from t010t1 where a=1 and b='1';

--- SQL command prepared.
>>explain xx;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... XX
PLAN_ID .................. 212281401856013822
ROWS_OUT ................. 1
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select * from t010t1 where a=1 and b='1';


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  olt_optimization ....... used
  max_card_est ........... 1
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 1
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... OFF
  select_list ............ %(1), %('1')
  input_variables ........ %(1), %('1')


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T1
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 1
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T1
  cache_size ........... 100
  probes ................. 1
  rows_accessed .......... 1
  key_columns ............ A
  executor_predicates .... (B = %('1'))
  begin_key .............. (A = %(1))
  end_key ................ (A = %(1))

--- SQL operation complete.
>>
>>-- should see a full hbase SCAN
>>prepare xx from select * from t010t1 where b='1';

--- SQL command prepared.
>>explain xx;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... XX
PLAN_ID .................. 212281401856088906
ROWS_OUT ................ 10
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select * from t010t1 where b='1';


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................ 10
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality ... 10
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... OFF
  select_list ............ TRAFODION.SCH.T010T1.A, %('1')
  input_variables ........ %('1')


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T1
REQUESTS_IN .............. 1
ROWS_OUT ................ 10
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T1
  columns ................ all
  begin_keys(incl)
  end_keys(incl)
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A
  executor_predicates .... (B = %('1'))

--- SQL operation complete.
>>
>>-- should see a unique hbase GET 
>>prepare xx from select * from t010t1 where a=1;

--- SQL command prepared.
>>explain xx;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... XX
PLAN_ID .................. 212281401855589648
ROWS_OUT ................. 1
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select * from t010t1 where a = 2;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  olt_optimization ....... used
  max_card_est ........... 1
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 1
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... OFF
  select_list ............ %(2), TRAFODION.SCH.T010T1.B
  input_variables ........ %(2)


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T1
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 1
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T1
  cache_size ........... 100
  probes ................. 1
  rows_accessed .......... 1
  key_columns ............ A
  begin_key .............. (A = %(2))
  end_key ................ (A = %(2))

--- SQL operation complete.
>>
>>insert into t010t2 values
+>(1, 'a', 1, '1a1'),
+>(1, 'a', 3, '1a3'),
+>(1, 'a', 5, '1a5'),
+>(1, 'c', 1, '1c1'),
+>(2, 'a', 1, '2a1'),
+>(2, 'a', 2, '2a2'),
+>(2, 'c', 3, '2c3'),
+>(4, 'a', 1, '4a1'),
+>(4, 'b', 1, '4b1'),
+>(4, 'b', 2, '4b2');

--- 10 row(s) inserted.
>>
>>insert into t010t3 select * from t010t2;

--- 10 row(s) inserted.
>>
>>prepare x1 from
+>select * from t010t2 where a in (1,4) and b='a' and c = 1;

--- SQL command prepared.
>>
>>execute x1;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          4  a                     1  4a1       

--- 2 row(s) selected.
>>-- expect 1a1, 4a1
>>
>>prepare x2 from
+>select * from t010t2 where a in (1,2,4) and b='a' and (c in (1,3) or c>=5);

--- SQL command prepared.
>>execute x2;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          1  a                     5  1a5       
          2  a                     1  2a1       
          4  a                     1  4a1       

--- 5 row(s) selected.
>>-- expect 1a1, 1a3, 1a5, 2a1, 4a1
>>
>>prepare x3 from
+>select * from t010t2 where a in (1,2,4) and b='a' and c in (1,3);

--- SQL command prepared.
>>execute x3;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          2  a                     1  2a1       
          4  a                     1  4a1       

--- 4 row(s) selected.
>>-- expect 1a1, 1a3, 2a1, 4a1
>>
>>prepare x4 from
+>delete from t010t2 where a in (2,4,6) and b='a' and c in (1,3);

--- SQL command prepared.
>>execute x4;

--- 2 row(s) deleted.
>>-- expect 2 rows deleted, 2a1 and 4a1
>>execute x3;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       

--- 2 row(s) selected.
>>-- expect 1a1, 1a3
>>
>>insert into t010t2 values
+>(2, 'a', 1, '2a1'),
+>(4, 'a', 1, '4a1');

--- 2 row(s) inserted.
>>
>>prepare x5 from 
+>update t010t2 set d='upd' where a=4 and b in ('a', 'b') and c < 2;

--- SQL command prepared.
>>execute x5;

--- 2 row(s) updated.
>>-- execute 2 rows updated, 4a1 and 4b1
>>select * from t010t2;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          1  a                     5  1a5       
          1  c                     1  1c1       
          2  a                     1  2a1       
          2  a                     2  2a2       
          2  c                     3  2c3       
          4  a                     1  upd       
          4  b                     1  upd       
          4  b                     2  4b2       

--- 10 row(s) selected.
>>
>>cqd HBASE_MAX_NUM_SEARCH_KEYS '1';

--- SQL operation complete.
>>
>>prepare y1 from
+>select * from t010t2 where a in (1,4) and b='a' and c = 1;

--- SQL command prepared.
>>execute y1;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          4  a                     1  upd       

--- 2 row(s) selected.
>>-- expect 1a1, 4a1
>>
>>prepare y2 from
+>select * from t010t2 where a in (1,2,4) and b='a' and (c in (1,3) or c>=5);

--- SQL command prepared.
>>execute y2;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          1  a                     5  1a5       
          2  a                     1  2a1       
          4  a                     1  upd       

--- 5 row(s) selected.
>>-- expect 1a1, 1a3, 1a5, 2a1, 4a1
>>
>>prepare y3 from
+>select * from t010t2 where a in (1,2,4) and b='a' and c in (1,3);

--- SQL command prepared.
>>execute y3;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          2  a                     1  2a1       
          4  a                     1  upd       

--- 4 row(s) selected.
>>-- expect 1a1, 1a3, 2a1, 4a1
>>
>>prepare y4 from
+>delete from t010t2 where a in (2,4,6) and b='a' and c in (1,3);

--- SQL command prepared.
>>execute y4;

--- 2 row(s) deleted.
>>-- expect 2 rows deleted, 2a1 and 4a1
>>execute y3;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       

--- 2 row(s) selected.
>>-- expect 1a1, 1a3
>>
>>insert into t010t2 values
+>(2, 'a', 1, '2a1'),
+>(4, 'a', 1, '4a1');

--- 2 row(s) inserted.
>>
>>prepare y5 from 
+>update t010t2 set d='uuu' where a=4 and b in ('a', 'b') and c < 2;

--- SQL command prepared.
>>execute y5;

--- 2 row(s) updated.
>>-- execute 2 rows updated, 4a1 and 4b1
>>select * from t010t2;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          1  a                     5  1a5       
          1  c                     1  1c1       
          2  a                     1  2a1       
          2  a                     2  2a2       
          2  c                     3  2c3       
          4  a                     1  uuu       
          4  b                     1  uuu       
          4  b                     2  4b2       

--- 10 row(s) selected.
>>
>>cqd HBASE_MAX_NUM_SEARCH_KEYS reset;

--- SQL operation complete.
>>
>>explain x1;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X1
PLAN_ID .................. 212281401858353117
ROWS_OUT ................. 2
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select *
                           from t010t2
                           where a in (1,4) and b='a' and c = 1;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 2
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... OFF
  select_list ............ TRAFODION.SCH.T010T2.A, %('a'), %(1),
                             TRAFODION.SCH.T010T2.D
  input_variables ........ %('a'), %(1)


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  executor_predicates .... (B = %('a')) and (C = %(1)) and ((A = 1) or (A = 4))
  begin_key .............. (A = <min>), (B = %('a')), (C = %(1))
  end_key ................ (A = <max>), (B = %('a')), (C = %(1))

--- SQL operation complete.
>>explain x2;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X2
PLAN_ID .................. 212281401858400301
ROWS_OUT ................. 5
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select *
                           from t010t2
                           where a in (1,2,4) and b='a' and (c in (1,
                             3) or c>=5);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 5
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 5
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... OFF
  select_list ............ TRAFODION.SCH.T010T2.A, %('a'),
                             TRAFODION.SCH.T010T2.C, TRAFODION.SCH.T010T2.D
  input_variables ........ %('a')


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 5
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  executor_predicates .... (B = %('a')) and (((A = 1) or (A = 2)) or (A = 4))
                             and (((C = 1) or (C = 3)) or (C >= 5))
  begin_key .............. (A = <min>), (B = %('a')), (C = <min>)
  end_key ................ (A = <max>), (B = %('a')), (C = <max>)

--- SQL operation complete.
>>explain x3;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X3
PLAN_ID .................. 212281401858445918
ROWS_OUT ................. 4
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select *
                           from t010t2
                           where a in (1,2,4) and b='a' and c in (1,3);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 4
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... OFF
  select_list ............ TRAFODION.SCH.T010T2.A, %('a'),
                             TRAFODION.SCH.T010T2.C, TRAFODION.SCH.T010T2.D
  input_variables ........ %('a')


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  executor_predicates .... (B = %('a')) and (((A = 1) or (A = 2)) or (A = 4))
                             and ((C = 1) or (C = 3))
  begin_key .............. (A = <min>), (B = %('a')), (C = <min>)
  end_key ................ (A = <max>), (B = %('a')), (C = <max>)

--- SQL operation complete.
>>explain x4;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X4
PLAN_ID .................. 212281401858495359
ROWS_OUT ................. 4
EST_TOTAL_COST ........... 0.01
STATEMENT ................ delete from t010t2
                           where a in (2,4,6) and b='a' and c in (1,3);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 4        ONLY CHILD 3
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 4
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 4
  total_overflow_size .... 0.00 KB
  upd_action_on_error .... xn_rollback
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... OFF
  input_variables ........ %('a')


TUPLE_FLOW ================================  SEQ_NO 3        CHILDREN 1, 2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 4
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  join_type .............. inner
  join_method ............ in-order nested


TRAFODION_DELETE ==========================  SEQ_NO 2        NO CHILDREN
TABLE_NAME ............... TRAFODION.SCH.T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  iud_type ............... trafodion_delete TRAFODION.SCH.T010T2
  begin_key .............. (A = A) and (B = %('a')) and (C = C)
  end_key ................ (A = A) and (B = %('a')) and (C = C)


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  executor_predicates .... (B = %('a')) and (((A = 2) or (A = 4)) or (A = 6))
                             and ((C = 1) or (C = 3))
  begin_key .............. (A = <min>), (B = %('a')), (C = <min>)
  end_key ................ (A = <max>), (B = %('a')), (C = <max>)

--- SQL operation complete.
>>explain x5;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X5
PLAN_ID .................. 212281401858600635
ROWS_OUT ................. 2
EST_TOTAL_COST ........... 0
STATEMENT ................ update t010t2
                           set d='upd'
                           where a=4 and b in ('a', 'b') and c < 2;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  olt_optimization ....... used
  max_card_est ........... 2
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 2
  total_overflow_size .... 0.00 KB
  upd_action_on_error .... xn_rollback
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... OFF
  input_variables ........ %('upd'), %(4)


TRAFODION_UPDATE ==========================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... TRAFODION.SCH.T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est ........... 2
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  iud_type ............... trafodion_update TRAFODION.SCH.T010T2
  new_rec_expr ........... (D assign %('upd'))
  predicate .............. (C < 2) and ((B = 'a') or (B = 'b'))
  begin_key .............. (A = %(4)) and (B = '<min>') and (C = <min>)
  end_key ................ (A = %(4)) and (B = '<max>') and (C = 2)

--- SQL operation complete.
>>explain y1;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y1
PLAN_ID .................. 212281401858691587
ROWS_OUT ................. 2
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select *
                           from t010t2
                           where a in (1,4) and b='a' and c = 1;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 2
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... OFF
  HBASE_MAX_NUM_SEARCH_KE  1
  select_list ............ TRAFODION.SCH.T010T2.A, %('a'), %(1),
                             TRAFODION.SCH.T010T2.D
  input_variables ........ %('a'), %(1)


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  executor_predicates .... (B = %('a')) and (C = %(1)) and ((A = 1) or (A = 4))
  begin_key .............. (A = <min>), (B = %('a')), (C = %(1))
  end_key ................ (A = <max>), (B = %('a')), (C = %(1))

--- SQL operation complete.
>>explain y2;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y2
PLAN_ID .................. 212281401858738204
ROWS_OUT ................. 5
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select *
                           from t010t2
                           where a in (1,2,4) and b='a' and (c in (1,
                             3) or c>=5);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 5
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 5
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... OFF
  HBASE_MAX_NUM_SEARCH_KE  1
  select_list ............ TRAFODION.SCH.T010T2.A, %('a'),
                             TRAFODION.SCH.T010T2.C, TRAFODION.SCH.T010T2.D
  input_variables ........ %('a')


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 5
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  executor_predicates .... (B = %('a')) and (((A = 1) or (A = 2)) or (A = 4))
                             and (((C = 1) or (C = 3)) or (C >= 5))
  begin_key .............. (A = <min>), (B = %('a')), (C = <min>)
  end_key ................ (A = <max>), (B = %('a')), (C = <max>)

--- SQL operation complete.
>>explain y3;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y3
PLAN_ID .................. 212281401858782617
ROWS_OUT ................. 4
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select *
                           from t010t2
                           where a in (1,2,4) and b='a' and c in (1,3);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 4
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... OFF
  HBASE_MAX_NUM_SEARCH_KE  1
  select_list ............ TRAFODION.SCH.T010T2.A, %('a'),
                             TRAFODION.SCH.T010T2.C, TRAFODION.SCH.T010T2.D
  input_variables ........ %('a')


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  executor_predicates .... (B = %('a')) and (((A = 1) or (A = 2)) or (A = 4))
                             and ((C = 1) or (C = 3))
  begin_key .............. (A = <min>), (B = %('a')), (C = <min>)
  end_key ................ (A = <max>), (B = %('a')), (C = <max>)

--- SQL operation complete.
>>explain y4;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y4
PLAN_ID .................. 212281401858831093
ROWS_OUT ................. 4
EST_TOTAL_COST ........... 0.01
STATEMENT ................ delete from t010t2
                           where a in (2,4,6) and b='a' and c in (1,3);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 4        ONLY CHILD 3
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 4
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 4
  total_overflow_size .... 0.00 KB
  upd_action_on_error .... xn_rollback
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... OFF
  HBASE_MAX_NUM_SEARCH_KE  1
  input_variables ........ %('a')


TUPLE_FLOW ================================  SEQ_NO 3        CHILDREN 1, 2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 4
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  join_type .............. inner
  join_method ............ in-order nested


TRAFODION_DELETE ==========================  SEQ_NO 2        NO CHILDREN
TABLE_NAME ............... TRAFODION.SCH.T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  iud_type ............... trafodion_delete TRAFODION.SCH.T010T2
  begin_key .............. (A = A) and (B = %('a')) and (C = C)
  end_key ................ (A = A) and (B = %('a')) and (C = C)


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  executor_predicates .... (B = %('a')) and (((A = 2) or (A = 4)) or (A = 6))
                             and ((C = 1) or (C = 3))
  begin_key .............. (A = <min>), (B = %('a')), (C = <min>)
  end_key ................ (A = <max>), (B = %('a')), (C = <max>)

--- SQL operation complete.
>>explain y5;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y5
PLAN_ID .................. 212281401858940844
ROWS_OUT ................. 2
EST_TOTAL_COST ........... 0
STATEMENT ................ update t010t2
                           set d='uuu'
                           where a=4 and b in ('a', 'b') and c < 2;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  olt_optimization ....... used
  max_card_est ........... 2
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 2
  total_overflow_size .... 0.00 KB
  upd_action_on_error .... xn_rollback
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... OFF
  HBASE_MAX_NUM_SEARCH_KE  1
  input_variables ........ %('uuu'), %(4)


TRAFODION_UPDATE ==========================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... TRAFODION.SCH.T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est ........... 2
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  iud_type ............... trafodion_update TRAFODION.SCH.T010T2
  new_rec_expr ........... (D assign %('uuu'))
  predicate .............. (C < 2) and ((B = 'a') or (B = 'b'))
  begin_key .............. (A = %(4)) and (B = '<min>') and (C = <min>)
  end_key ................ (A = %(4)) and (B = '<max>') and (C = 2)

--- SQL operation complete.
>>
>>select "_SALT_", * from t010t3 order by a,b,c;

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         2            1  a                     1  1a1       
         2            1  a                     3  1a3       
         2            1  a                     5  1a5       
         1            1  c                     1  1c1       
         3            2  a                     1  2a1       
         3            2  a                     2  2a2       
         0            2  c                     3  2c3       
         2            4  a                     1  4a1       
         1            4  b                     1  4b1       
         1            4  b                     2  4b2       

--- 10 row(s) selected.
>>select "_SALT_", * from t010t3 where a=1 and b='c';

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         1            1  c                     1  1c1       

--- 1 row(s) selected.
>>
>>update t010t3 set d='2axu' where a=2 and b='a';

--- 2 row(s) updated.
>>-- 2 rows updated
>>update t010t3 set d='4b1u' where a=4 and b='b' and c <= 1;

--- 1 row(s) updated.
>>-- 1 row updated
>>update t010t3 set a=3 where a=2;

--- 3 row(s) updated.
>>-- 3 rows updated
>>delete from t010t3 where a=3 and b='c' and c=3;

--- 1 row(s) deleted.
>>-- 1 row deleted
>>delete from t010t3 where d like '2%u %';

--- 2 row(s) deleted.
>>-- 2 rows deleted
>>select "_SALT_", * from t010t3;

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         1            1  c                     1  1c1       
         1            4  b                     1  4b1u      
         1            4  b                     2  4b2       
         2            1  a                     1  1a1       
         2            1  a                     3  1a3       
         2            1  a                     5  1a5       
         2            4  a                     1  4a1       

--- 7 row(s) selected.
>>-- 7 rows
>>merge into t010t3
+>  using (select * from t010t2) as src
+>  on ((src.a, src.b, src.c) = (a,b,c))
+>when matched
+>  then update set d = src.d
+>when not matched
+>  then insert values (src.a, src.b, src.c, src.d)
+>;

--- 10 row(s) updated.
>>-- 10 rows updated
>>select "_SALT_", * from t010t2 natural join t010t3 order by a,b,c;

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         2            1  a                     1  1a1       
         2            1  a                     3  1a3       
         2            1  a                     5  1a5       
         1            1  c                     1  1c1       
         3            2  a                     1  2a1       
         3            2  a                     2  2a2       
         0            2  c                     3  2c3       
         2            4  a                     1  uuu       
         1            4  b                     1  uuu       
         1            4  b                     2  4b2       

--- 10 row(s) selected.
>>-- expect 10 rows, same as each individual table
>>
>>select "_SALT_", * from table(table t010t3, partition number 4);

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         3            2  a                     1  2a1       
         3            2  a                     2  2a2       

--- 2 row(s) selected.
>>select "_SALT_", * from table(table t010t3, partition number from 1 to 3);

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         0            2  c                     3  2c3       
         1            1  c                     1  1c1       
         1            4  b                     1  uuu       
         1            4  b                     2  4b2       
         2            1  a                     1  1a1       
         2            1  a                     3  1a3       
         2            1  a                     5  1a5       
         2            4  a                     1  uuu       

--- 8 row(s) selected.
>>-- 2 statements above must return 10 rows total
>>
>>
>>-- query_cache off, mdam_scan_method on
>>cqd query_cache '0';

--- SQL operation complete.
>>cqd mdam_scan_method 'ON';

--- SQL operation complete.
>>obey TEST010(clean_up);
>>--------------------------------------------------------------------------
>>drop table if exists t010t1;

--- SQL operation complete.
>>drop table if exists t010t2;

--- SQL operation complete.
>>drop table if exists t010t3;

--- SQL operation complete.
>>
>>obey TEST010(tests);
>>--------------------------------------------------------------------------
>>
>>create table if not exists t010t1 (a int not null, b char(10), primary key(a));

--- SQL operation complete.
>>create table if not exists t010t2 (a int not null, b char(10) not null, c int not null, d char(10), primary key(a,b,c));

--- SQL operation complete.
>>create table if not exists t010t3 (a int not null, b char(10) not null, c int not null, d char(10), primary key(a,b,c))
+>  salt using 4 partitions on (a,b);

--- SQL operation complete.
>>
>>invoke t010t1;

-- Definition of Trafodion table TRAFODION.SCH.T010T1
-- Definition current  Thu Oct 30 04:04:36 2014

  (
    A                                INT NO DEFAULT NOT NULL NOT DROPPABLE
  , B                                CHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT DEFAULT NULL
  )

--- SQL operation complete.
>>invoke hbase."_CELL_"."TRAFODION.SCH.T010T1";

-- Definition of Trafodion table HBASE."_CELL_"."TRAFODION.SCH.T010T1"
-- Definition current  Thu Oct 30 04:04:36 2014

  (
    ROW_ID                           VARCHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , COL_FAMILY                       VARCHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , COL_NAME                         VARCHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , COL_TIMESTAMP                    LARGEINT NO DEFAULT NOT NULL NOT DROPPABLE
  , COL_VALUE                        VARCHAR(20) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  )

--- SQL operation complete.
>>invoke hbase."_ROW_"."TRAFODION.SCH.T010T1";

-- Definition of Trafodion table HBASE."_ROW_"."TRAFODION.SCH.T010T1"
-- Definition current  Thu Oct 30 04:04:36 2014

  (
    ROW_ID                           VARCHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , COLUMN_DETAILS                   VARCHAR(60) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  )

--- SQL operation complete.
>>
>>insert into t010t1 values (1, 'a'), (2, 'b'), (3, 'c');

--- 3 row(s) inserted.
>>
>>select * from t010t1;

A            B         
-----------  ----------

          1  a         
          2  b         
          3  c         

--- 3 row(s) selected.
>>
>>select * from t010t1 where a = 2;

A            B         
-----------  ----------

          2  b         

--- 1 row(s) selected.
>>
>>select * from t010t1 where a = 2 or a = 3;

A            B         
-----------  ----------

          2  b         
          3  c         

--- 2 row(s) selected.
>>
>>delete from t010t1 where a = 4;

--- 0 row(s) deleted.
>>
>>select * from t010t1;

A            B         
-----------  ----------

          1  a         
          2  b         
          3  c         

--- 3 row(s) selected.
>>
>>delete from t010t1 where a = 2;

--- 1 row(s) deleted.
>>
>>select * from t010t1;

A            B         
-----------  ----------

          1  a         
          3  c         

--- 2 row(s) selected.
>>
>>select converttohex(cast(row_id as char(4))) rowid,
+>          converttohex(cast(col_family as char(2))) colfamily,
+>          converttohex(cast(col_name as char(1))) colname,
+>          converttohex(cast(col_value as char(4))) colvalue
+>                from hbase."_CELL_"."TRAFODION.SCH.T010T1";

ROWID     COLFAMILY  COLNAME  COLVALUE
--------  ---------  -------  --------

80000001  2331       01       01000000
80000001  2331       02       00612020
80000003  2331       01       03000000
80000003  2331       02       00632020

--- 4 row(s) selected.
>>
>>select converttohex(cast(row_id as char(4))) rowid,
+>          converttohex(cast(col_family as char(2))) colfamily,
+>          converttohex(cast(col_name as char(1))) colname,
+>          converttohex(cast(col_value as char(4))) colvalue
+>                from hbase."_CELL_"."TRAFODION.SCH.T010T1"
+>          where converttohex(cast(row_id as char(4))) = '80000001';

ROWID     COLFAMILY  COLNAME  COLVALUE
--------  ---------  -------  --------

80000001  2331       01       01000000
80000001  2331       02       00612020

--- 2 row(s) selected.
>>
>>select converttohex(cast(row_id as char(4))) rowid,
+>          converttohex(cast(column_details as char(40))) coldetails
+>                 from hbase."_ROW_"."TRAFODION.SCH.T010T1";

ROWID     COLDETAILS
--------  --------------------------------------------------------------------------------

80000001  040023313A010400000001000000040023313A020B00000000612020202020202020202020202020
80000003  040023313A010400000003000000040023313A020B00000000632020202020202020202020202020

--- 2 row(s) selected.
>>select converttohex(cast(row_id as char(4))) rowid,
+>          converttohex(cast(column_details as char(40))) coldetails
+>                 from hbase."_ROW_"."TRAFODION.SCH.T010T1"
+>          where converttohex(cast(row_id as char(4))) = '80000001';

ROWID     COLDETAILS
--------  --------------------------------------------------------------------------------

80000001  040023313A010400000001000000040023313A020B00000000612020202020202020202020202020

--- 1 row(s) selected.
>>
>>-------------------
>>-- check query plan
>>-------------------
>>
>>-- no sort operator should present when order by on primary key column
>>prepare xx from select * from t010t1 order by a;

--- SQL command prepared.
>>explain options 'f' xx;

LC   RC   OP   OPERATOR              OPT       DESCRIPTION           CARD
---- ---- ---- --------------------  --------  --------------------  ---------

1    .    2    root                                                  1.00E+002
.    .    1    trafodion_scan                  T010T1                1.00E+002

--- SQL operation complete.
>>
>>-- should see a sort when order by on non key column
>>prepare xx from select * from t010t1 order by b;

--- SQL command prepared.
>>explain options 'f' xx;

LC   RC   OP   OPERATOR              OPT       DESCRIPTION           CARD
---- ---- ---- --------------------  --------  --------------------  ---------

2    .    3    root                                                  1.00E+002
1    .    2    sort                                                  1.00E+002
.    .    1    trafodion_scan                  T010T1                1.00E+002

--- SQL operation complete.
>>
>>-- selectPred should present due to the 2nd disjunct b='1'
>>prepare xx from select * from t010t1 where a=1 or b='1';

--- SQL command prepared.
>>explain xx;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... XX
PLAN_ID .................. 212281401877003296
ROWS_OUT ................ 11
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select * from t010t1 where a=1 or b='1';


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................ 11
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 51
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality ... 11
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON
  select_list ............ TRAFODION.SCH.T010T1.A, TRAFODION.SCH.T010T1.B


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T1
REQUESTS_IN .............. 1
ROWS_OUT ................ 11
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 51
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T1
  columns ................ all
  begin_keys(incl)
  end_keys(incl)
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A
  executor_predicates .... ((A = 1) or (B = '1'))

--- SQL operation complete.
>>
>>-- Optimization: with only one disjunct, the selectPred should be empty
>>-- and the executor predicate should contain the non-key predicate
>>prepare xx from select * from t010t1 where a=1 and b='1';

--- SQL command prepared.
>>explain xx;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... XX
PLAN_ID .................. 212281401877071222
ROWS_OUT ................. 1
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select * from t010t1 where a=1 and b='1';


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  olt_optimization ....... used
  max_card_est ........... 1
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 1
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON
  select_list ............ 1, '1'


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T1
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 1
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T1
  columns ................ all
  unique_rows ............ 1
  cache_size ........... 100
  probes ................. 1
  rows_accessed .......... 1
  key_columns ............ A
  executor_predicates .... (B = '1')

--- SQL operation complete.
>>
>>-- should see a full hbase SCAN
>>prepare xx from select * from t010t1 where b='1';

--- SQL command prepared.
>>explain xx;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... XX
PLAN_ID .................. 212281401877135317
ROWS_OUT ................ 10
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select * from t010t1 where b='1';


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................ 10
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality ... 10
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON
  select_list ............ TRAFODION.SCH.T010T1.A, '1'


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T1
REQUESTS_IN .............. 1
ROWS_OUT ................ 10
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T1
  columns ................ all
  begin_keys(incl)
  end_keys(incl)
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A
  executor_predicates .... (B = '1')

--- SQL operation complete.
>>
>>-- should see a unique hbase GET 
>>prepare xx from select * from t010t1 where a=1;

--- SQL command prepared.
>>explain xx;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... XX
PLAN_ID .................. 212281401877199625
ROWS_OUT ................. 1
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select * from t010t1 where a=1;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  olt_optimization ....... used
  max_card_est ........... 1
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 1
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON
  select_list ............ 1, TRAFODION.SCH.T010T1.B


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T1
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 1
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T1
  columns ................ all
  unique_rows ............ 1
  cache_size ........... 100
  probes ................. 1
  rows_accessed .......... 1
  key_columns ............ A

--- SQL operation complete.
>>
>>insert into t010t2 values
+>(1, 'a', 1, '1a1'),
+>(1, 'a', 3, '1a3'),
+>(1, 'a', 5, '1a5'),
+>(1, 'c', 1, '1c1'),
+>(2, 'a', 1, '2a1'),
+>(2, 'a', 2, '2a2'),
+>(2, 'c', 3, '2c3'),
+>(4, 'a', 1, '4a1'),
+>(4, 'b', 1, '4b1'),
+>(4, 'b', 2, '4b2');

--- 10 row(s) inserted.
>>
>>insert into t010t3 select * from t010t2;

--- 10 row(s) inserted.
>>
>>prepare x1 from
+>select * from t010t2 where a in (1,4) and b='a' and c = 1;

--- SQL command prepared.
>>
>>execute x1;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          4  a                     1  4a1       

--- 2 row(s) selected.
>>-- expect 1a1, 4a1
>>
>>prepare x2 from
+>select * from t010t2 where a in (1,2,4) and b='a' and (c in (1,3) or c>=5);

--- SQL command prepared.
>>execute x2;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          1  a                     5  1a5       
          2  a                     1  2a1       
          4  a                     1  4a1       

--- 5 row(s) selected.
>>-- expect 1a1, 1a3, 1a5, 2a1, 4a1
>>
>>prepare x3 from
+>select * from t010t2 where a in (1,2,4) and b='a' and c in (1,3);

--- SQL command prepared.
>>execute x3;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          2  a                     1  2a1       
          4  a                     1  4a1       

--- 4 row(s) selected.
>>-- expect 1a1, 1a3, 2a1, 4a1
>>
>>prepare x4 from
+>delete from t010t2 where a in (2,4,6) and b='a' and c in (1,3);

--- SQL command prepared.
>>execute x4;

--- 2 row(s) deleted.
>>-- expect 2 rows deleted, 2a1 and 4a1
>>execute x3;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       

--- 2 row(s) selected.
>>-- expect 1a1, 1a3
>>
>>insert into t010t2 values
+>(2, 'a', 1, '2a1'),
+>(4, 'a', 1, '4a1');

--- 2 row(s) inserted.
>>
>>prepare x5 from 
+>update t010t2 set d='upd' where a=4 and b in ('a', 'b') and c < 2;

--- SQL command prepared.
>>execute x5;

--- 2 row(s) updated.
>>-- execute 2 rows updated, 4a1 and 4b1
>>select * from t010t2;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          1  a                     5  1a5       
          1  c                     1  1c1       
          2  a                     1  2a1       
          2  a                     2  2a2       
          2  c                     3  2c3       
          4  a                     1  upd       
          4  b                     1  upd       
          4  b                     2  4b2       

--- 10 row(s) selected.
>>
>>cqd HBASE_MAX_NUM_SEARCH_KEYS '1';

--- SQL operation complete.
>>
>>prepare y1 from
+>select * from t010t2 where a in (1,4) and b='a' and c = 1;

--- SQL command prepared.
>>execute y1;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          4  a                     1  upd       

--- 2 row(s) selected.
>>-- expect 1a1, 4a1
>>
>>prepare y2 from
+>select * from t010t2 where a in (1,2,4) and b='a' and (c in (1,3) or c>=5);

--- SQL command prepared.
>>execute y2;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          1  a                     5  1a5       
          2  a                     1  2a1       
          4  a                     1  upd       

--- 5 row(s) selected.
>>-- expect 1a1, 1a3, 1a5, 2a1, 4a1
>>
>>prepare y3 from
+>select * from t010t2 where a in (1,2,4) and b='a' and c in (1,3);

--- SQL command prepared.
>>execute y3;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          2  a                     1  2a1       
          4  a                     1  upd       

--- 4 row(s) selected.
>>-- expect 1a1, 1a3, 2a1, 4a1
>>
>>prepare y4 from
+>delete from t010t2 where a in (2,4,6) and b='a' and c in (1,3);

--- SQL command prepared.
>>execute y4;

--- 2 row(s) deleted.
>>-- expect 2 rows deleted, 2a1 and 4a1
>>execute y3;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       

--- 2 row(s) selected.
>>-- expect 1a1, 1a3
>>
>>insert into t010t2 values
+>(2, 'a', 1, '2a1'),
+>(4, 'a', 1, '4a1');

--- 2 row(s) inserted.
>>
>>prepare y5 from 
+>update t010t2 set d='uuu' where a=4 and b in ('a', 'b') and c < 2;

--- SQL command prepared.
>>execute y5;

--- 2 row(s) updated.
>>-- execute 2 rows updated, 4a1 and 4b1
>>select * from t010t2;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          1  a                     5  1a5       
          1  c                     1  1c1       
          2  a                     1  2a1       
          2  a                     2  2a2       
          2  c                     3  2c3       
          4  a                     1  uuu       
          4  b                     1  uuu       
          4  b                     2  4b2       

--- 10 row(s) selected.
>>
>>cqd HBASE_MAX_NUM_SEARCH_KEYS reset;

--- SQL operation complete.
>>
>>explain x1;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X1
PLAN_ID .................. 212281401879310745
ROWS_OUT ................. 2
EST_TOTAL_COST ........... 0
STATEMENT ................ select *
                           from t010t2
                           where a in (1,4) and b='a' and c = 1;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 2
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON
  select_list ............ TRAFODION.SCH.T010T2.A, 'a', 1,
                             TRAFODION.SCH.T010T2.D


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  mdam_disjunct .......... ((A = 1) or (A = 4)) and (B = 'a') and (C = 1)

--- SQL operation complete.
>>explain x2;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X2
PLAN_ID .................. 212281401879378828
ROWS_OUT ................. 5
EST_TOTAL_COST ........... 0
STATEMENT ................ select *
                           from t010t2
                           where a in (1,2,4) and b='a' and (c in (1,
                             3) or c>=5);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 5
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 5
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON
  select_list ............ TRAFODION.SCH.T010T2.A, 'a', TRAFODION.SCH.T010T2.C,
                             TRAFODION.SCH.T010T2.D


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 5
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  mdam_disjunct .......... (((A = 1) or (A = 2)) or (A = 4)) and (B = 'a') and
                             (((C = 1) or (C = 3)) or (C >= 5))

--- SQL operation complete.
>>explain x3;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X3
PLAN_ID .................. 212281401879462780
ROWS_OUT ................. 4
EST_TOTAL_COST ........... 0
STATEMENT ................ select *
                           from t010t2
                           where a in (1,2,4) and b='a' and c in (1,3);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 4
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON
  select_list ............ TRAFODION.SCH.T010T2.A, 'a', TRAFODION.SCH.T010T2.C,
                             TRAFODION.SCH.T010T2.D


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  mdam_disjunct .......... (((A = 1) or (A = 2)) or (A = 4)) and ((C = 1) or (C
                             = 3)) and (B = 'a')

--- SQL operation complete.
>>explain x4;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X4
PLAN_ID .................. 212281401879540300
ROWS_OUT ................. 4
EST_TOTAL_COST ........... 0.01
STATEMENT ................ delete from t010t2
                           where a in (2,4,6) and b='a' and c in (1,3);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 4        ONLY CHILD 3
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 4
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 4
  total_overflow_size .... 0.00 KB
  upd_action_on_error .... xn_rollback
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON


TUPLE_FLOW ================================  SEQ_NO 3        CHILDREN 1, 2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 4
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  join_type .............. inner
  join_method ............ in-order nested


TRAFODION_DELETE ==========================  SEQ_NO 2        NO CHILDREN
TABLE_NAME ............... TRAFODION.SCH.T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  iud_type ............... trafodion_delete TRAFODION.SCH.T010T2
  begin_key .............. (A = A) and (B = 'a') and (C = C)
  end_key ................ (A = A) and (B = 'a') and (C = C)


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  executor_predicates .... (B = 'a')
  mdam_disjunct .......... (((A = 2) or (A = 4)) or (A = 6)) and ((C = 1) or (C
                             = 3)) and (B = 'a')

--- SQL operation complete.
>>explain x5;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X5
PLAN_ID .................. 212281401879703027
ROWS_OUT ................. 2
EST_TOTAL_COST ........... 0
STATEMENT ................ update t010t2
                           set d='upd'
                           where a=4 and b in ('a', 'b') and c < 2;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  olt_optimization ....... used
  max_card_est ........... 2
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 2
  total_overflow_size .... 0.00 KB
  upd_action_on_error .... xn_rollback
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON


TRAFODION_UPDATE ==========================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... TRAFODION.SCH.T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est ........... 2
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  iud_type ............... trafodion_update TRAFODION.SCH.T010T2
  columns ................ all
  begin_keys(incl) ....... 4,a,-2147483648
  end_keys(excl) ......... 4,a,2
  columns ................ all
  begin_keys(incl) ....... 4,b,-2147483648
  end_keys(excl) ......... 4,b,2
  new_rec_expr ........... (D assign 'upd')

--- SQL operation complete.
>>explain y1;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y1
PLAN_ID .................. 212281401879788365
ROWS_OUT ................. 2
EST_TOTAL_COST ........... 0
STATEMENT ................ select *
                           from t010t2
                           where a in (1,4) and b='a' and c = 1;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 2
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON
  HBASE_MAX_NUM_SEARCH_KE  1
  select_list ............ TRAFODION.SCH.T010T2.A, 'a', 1,
                             TRAFODION.SCH.T010T2.D


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  mdam_disjunct .......... ((A = 1) or (A = 4)) and (B = 'a') and (C = 1)

--- SQL operation complete.
>>explain y2;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y2
PLAN_ID .................. 212281401879856612
ROWS_OUT ................. 5
EST_TOTAL_COST ........... 0
STATEMENT ................ select *
                           from t010t2
                           where a in (1,2,4) and b='a' and (c in (1,
                             3) or c>=5);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 5
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 5
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON
  HBASE_MAX_NUM_SEARCH_KE  1
  select_list ............ TRAFODION.SCH.T010T2.A, 'a', TRAFODION.SCH.T010T2.C,
                             TRAFODION.SCH.T010T2.D


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 5
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  mdam_disjunct .......... (((A = 1) or (A = 2)) or (A = 4)) and (B = 'a') and
                             (((C = 1) or (C = 3)) or (C >= 5))

--- SQL operation complete.
>>explain y3;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y3
PLAN_ID .................. 212281401879938578
ROWS_OUT ................. 4
EST_TOTAL_COST ........... 0
STATEMENT ................ select *
                           from t010t2
                           where a in (1,2,4) and b='a' and c in (1,3);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 4
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON
  HBASE_MAX_NUM_SEARCH_KE  1
  select_list ............ TRAFODION.SCH.T010T2.A, 'a', TRAFODION.SCH.T010T2.C,
                             TRAFODION.SCH.T010T2.D


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  mdam_disjunct .......... (((A = 1) or (A = 2)) or (A = 4)) and ((C = 1) or (C
                             = 3)) and (B = 'a')

--- SQL operation complete.
>>explain y4;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y4
PLAN_ID .................. 212281401880018813
ROWS_OUT ................. 4
EST_TOTAL_COST ........... 0.01
STATEMENT ................ delete from t010t2
                           where a in (2,4,6) and b='a' and c in (1,3);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 4        ONLY CHILD 3
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 4
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 4
  total_overflow_size .... 0.00 KB
  upd_action_on_error .... xn_rollback
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON
  HBASE_MAX_NUM_SEARCH_KE  1


TUPLE_FLOW ================================  SEQ_NO 3        CHILDREN 1, 2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 4
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  join_type .............. inner
  join_method ............ in-order nested


TRAFODION_DELETE ==========================  SEQ_NO 2        NO CHILDREN
TABLE_NAME ............... TRAFODION.SCH.T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  iud_type ............... trafodion_delete TRAFODION.SCH.T010T2
  begin_key .............. (A = A) and (B = 'a') and (C = C)
  end_key ................ (A = A) and (B = 'a') and (C = C)


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  executor_predicates .... (B = 'a')
  mdam_disjunct .......... (((A = 2) or (A = 4)) or (A = 6)) and ((C = 1) or (C
                             = 3)) and (B = 'a')

--- SQL operation complete.
>>explain y5;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y5
PLAN_ID .................. 212281401880180823
ROWS_OUT ................. 2
EST_TOTAL_COST ........... 0
STATEMENT ................ update t010t2
                           set d='uuu'
                           where a=4 and b in ('a', 'b') and c < 2;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  olt_optimization ....... used
  max_card_est ........... 2
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 2
  total_overflow_size .... 0.00 KB
  upd_action_on_error .... xn_rollback
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... OFF
  HBASE_FILTER_PREDS ..... OFF
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON
  HBASE_MAX_NUM_SEARCH_KE  1


TRAFODION_UPDATE ==========================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... TRAFODION.SCH.T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est ........... 2
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  iud_type ............... trafodion_update TRAFODION.SCH.T010T2
  columns ................ all
  begin_keys(incl) ....... 4,,-2147483648
  end_keys(incl) ......... 4,??????????,2
  new_rec_expr ........... (D assign 'uuu')
  predicate .............. ((B = 'a') or (B = 'b')) and (C < 2)

--- SQL operation complete.
>>
>>select "_SALT_", * from t010t3 order by a,b,c;

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         2            1  a                     1  1a1       
         2            1  a                     3  1a3       
         2            1  a                     5  1a5       
         1            1  c                     1  1c1       
         3            2  a                     1  2a1       
         3            2  a                     2  2a2       
         0            2  c                     3  2c3       
         2            4  a                     1  4a1       
         1            4  b                     1  4b1       
         1            4  b                     2  4b2       

--- 10 row(s) selected.
>>select "_SALT_", * from t010t3 where a=1 and b='c';

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         1            1  c                     1  1c1       

--- 1 row(s) selected.
>>
>>update t010t3 set d='2axu' where a=2 and b='a';

--- 2 row(s) updated.
>>-- 2 rows updated
>>update t010t3 set d='4b1u' where a=4 and b='b' and c <= 1;

--- 1 row(s) updated.
>>-- 1 row updated
>>update t010t3 set a=3 where a=2;

--- 3 row(s) updated.
>>-- 3 rows updated
>>delete from t010t3 where a=3 and b='c' and c=3;

--- 1 row(s) deleted.
>>-- 1 row deleted
>>delete from t010t3 where d like '2%u %';

--- 2 row(s) deleted.
>>-- 2 rows deleted
>>select "_SALT_", * from t010t3;

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         1            1  c                     1  1c1       
         1            4  b                     1  4b1u      
         1            4  b                     2  4b2       
         2            1  a                     1  1a1       
         2            1  a                     3  1a3       
         2            1  a                     5  1a5       
         2            4  a                     1  4a1       

--- 7 row(s) selected.
>>-- 7 rows
>>merge into t010t3
+>  using (select * from t010t2) as src
+>  on ((src.a, src.b, src.c) = (a,b,c))
+>when matched
+>  then update set d = src.d
+>when not matched
+>  then insert values (src.a, src.b, src.c, src.d)
+>;

--- 10 row(s) updated.
>>-- 10 rows updated
>>select "_SALT_", * from t010t2 natural join t010t3 order by a,b,c;

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         2            1  a                     1  1a1       
         2            1  a                     3  1a3       
         2            1  a                     5  1a5       
         1            1  c                     1  1c1       
         3            2  a                     1  2a1       
         3            2  a                     2  2a2       
         0            2  c                     3  2c3       
         2            4  a                     1  uuu       
         1            4  b                     1  uuu       
         1            4  b                     2  4b2       

--- 10 row(s) selected.
>>-- expect 10 rows, same as each individual table
>>
>>select "_SALT_", * from table(table t010t3, partition number 4);

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         3            2  a                     1  2a1       
         3            2  a                     2  2a2       

--- 2 row(s) selected.
>>select "_SALT_", * from table(table t010t3, partition number from 1 to 3);

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         0            2  c                     3  2c3       
         1            1  c                     1  1c1       
         1            4  b                     1  uuu       
         1            4  b                     2  4b2       
         2            1  a                     1  1a1       
         2            1  a                     3  1a3       
         2            1  a                     5  1a5       
         2            4  a                     1  uuu       

--- 8 row(s) selected.
>>-- 2 statements above must return 10 rows total
>>
>>
>>-- run with hbase_serialization ON
>>obey TEST010(clean_up);
>>--------------------------------------------------------------------------
>>drop table if exists t010t1;

--- SQL operation complete.
>>drop table if exists t010t2;

--- SQL operation complete.
>>drop table if exists t010t3;

--- SQL operation complete.
>>
>>cqd hbase_serialization 'ON';

--- SQL operation complete.
>>cqd hbase_filter_preds 'ON';

--- SQL operation complete.
>>
>>-- query_cache on(default), mdam_scan_method on(default)
>>cqd query_cache '1024';

--- SQL operation complete.
>>cqd mdam_scan_method 'ON';

--- SQL operation complete.
>>obey TEST010(clean_up);
>>--------------------------------------------------------------------------
>>drop table if exists t010t1;

--- SQL operation complete.
>>drop table if exists t010t2;

--- SQL operation complete.
>>drop table if exists t010t3;

--- SQL operation complete.
>>
>>obey TEST010(tests);
>>--------------------------------------------------------------------------
>>
>>create table if not exists t010t1 (a int not null, b char(10), primary key(a));

--- SQL operation complete.
>>create table if not exists t010t2 (a int not null, b char(10) not null, c int not null, d char(10), primary key(a,b,c));

--- SQL operation complete.
>>create table if not exists t010t3 (a int not null, b char(10) not null, c int not null, d char(10), primary key(a,b,c))
+>  salt using 4 partitions on (a,b);

--- SQL operation complete.
>>
>>invoke t010t1;

-- Definition of Trafodion table TRAFODION.SCH.T010T1
-- Definition current  Thu Oct 30 04:04:58 2014

  (
    A                                INT NO DEFAULT NOT NULL NOT DROPPABLE
  , B                                CHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT DEFAULT NULL
  )

--- SQL operation complete.
>>invoke hbase."_CELL_"."TRAFODION.SCH.T010T1";

-- Definition of Trafodion table HBASE."_CELL_"."TRAFODION.SCH.T010T1"
-- Definition current  Thu Oct 30 04:04:58 2014

  (
    ROW_ID                           VARCHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , COL_FAMILY                       VARCHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , COL_NAME                         VARCHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , COL_TIMESTAMP                    LARGEINT NO DEFAULT NOT NULL NOT DROPPABLE
  , COL_VALUE                        VARCHAR(20) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  )

--- SQL operation complete.
>>invoke hbase."_ROW_"."TRAFODION.SCH.T010T1";

-- Definition of Trafodion table HBASE."_ROW_"."TRAFODION.SCH.T010T1"
-- Definition current  Thu Oct 30 04:04:58 2014

  (
    ROW_ID                           VARCHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , COLUMN_DETAILS                   VARCHAR(60) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  )

--- SQL operation complete.
>>
>>insert into t010t1 values (1, 'a'), (2, 'b'), (3, 'c');

--- 3 row(s) inserted.
>>
>>select * from t010t1;

A            B         
-----------  ----------

          1  a         
          2  b         
          3  c         

--- 3 row(s) selected.
>>
>>select * from t010t1 where a = 2;

A            B         
-----------  ----------

          2  b         

--- 1 row(s) selected.
>>
>>select * from t010t1 where a = 2 or a = 3;

A            B         
-----------  ----------

          2  b         
          3  c         

--- 2 row(s) selected.
>>
>>delete from t010t1 where a = 4;

--- 0 row(s) deleted.
>>
>>select * from t010t1;

A            B         
-----------  ----------

          1  a         
          2  b         
          3  c         

--- 3 row(s) selected.
>>
>>delete from t010t1 where a = 2;

--- 1 row(s) deleted.
>>
>>select * from t010t1;

A            B         
-----------  ----------

          1  a         
          3  c         

--- 2 row(s) selected.
>>
>>select converttohex(cast(row_id as char(4))) rowid,
+>          converttohex(cast(col_family as char(2))) colfamily,
+>          converttohex(cast(col_name as char(1))) colname,
+>          converttohex(cast(col_value as char(4))) colvalue
+>                from hbase."_CELL_"."TRAFODION.SCH.T010T1";

ROWID     COLFAMILY  COLNAME  COLVALUE
--------  ---------  -------  --------

80000001  2331       01       80000001
80000001  2331       02       00612020
80000003  2331       01       80000003
80000003  2331       02       00632020

--- 4 row(s) selected.
>>
>>select converttohex(cast(row_id as char(4))) rowid,
+>          converttohex(cast(col_family as char(2))) colfamily,
+>          converttohex(cast(col_name as char(1))) colname,
+>          converttohex(cast(col_value as char(4))) colvalue
+>                from hbase."_CELL_"."TRAFODION.SCH.T010T1"
+>          where converttohex(cast(row_id as char(4))) = '80000001';

ROWID     COLFAMILY  COLNAME  COLVALUE
--------  ---------  -------  --------

80000001  2331       01       80000001
80000001  2331       02       00612020

--- 2 row(s) selected.
>>
>>select converttohex(cast(row_id as char(4))) rowid,
+>          converttohex(cast(column_details as char(40))) coldetails
+>                 from hbase."_ROW_"."TRAFODION.SCH.T010T1";

ROWID     COLDETAILS
--------  --------------------------------------------------------------------------------

80000001  040023313A010400000080000001040023313A020B00000000612020202020202020202020202020
80000003  040023313A010400000080000003040023313A020B00000000632020202020202020202020202020

--- 2 row(s) selected.
>>select converttohex(cast(row_id as char(4))) rowid,
+>          converttohex(cast(column_details as char(40))) coldetails
+>                 from hbase."_ROW_"."TRAFODION.SCH.T010T1"
+>          where converttohex(cast(row_id as char(4))) = '80000001';

ROWID     COLDETAILS
--------  --------------------------------------------------------------------------------

80000001  040023313A010400000080000001040023313A020B00000000612020202020202020202020202020

--- 1 row(s) selected.
>>
>>-------------------
>>-- check query plan
>>-------------------
>>
>>-- no sort operator should present when order by on primary key column
>>prepare xx from select * from t010t1 order by a;

--- SQL command prepared.
>>explain options 'f' xx;

LC   RC   OP   OPERATOR              OPT       DESCRIPTION           CARD
---- ---- ---- --------------------  --------  --------------------  ---------

1    .    2    root                                                  1.00E+002
.    .    1    trafodion_scan                  T010T1                1.00E+002

--- SQL operation complete.
>>
>>-- should see a sort when order by on non key column
>>prepare xx from select * from t010t1 order by b;

--- SQL command prepared.
>>explain options 'f' xx;

LC   RC   OP   OPERATOR              OPT       DESCRIPTION           CARD
---- ---- ---- --------------------  --------  --------------------  ---------

2    .    3    root                                                  1.00E+002
1    .    2    sort                                                  1.00E+002
.    .    1    trafodion_scan                  T010T1                1.00E+002

--- SQL operation complete.
>>
>>-- selectPred should present due to the 2nd disjunct b='1'
>>prepare xx from select * from t010t1 where a=1 or b='1';

--- SQL command prepared.
>>explain xx;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... XX
PLAN_ID .................. 212281401899080827
ROWS_OUT ................ 11
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select * from t010t1 where a=1 or b='1';


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................ 11
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 51
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality ... 11
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  select_list ............ TRAFODION.SCH.T010T1.A, TRAFODION.SCH.T010T1.B


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T1
REQUESTS_IN .............. 1
ROWS_OUT ................ 11
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 51
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T1
  columns ................ all
  begin_keys(incl)
  end_keys(incl)
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A
  executor_predicates .... ((A = 1) or (B = '1'))

--- SQL operation complete.
>>
>>-- Optimization: with only one disjunct, the selectPred should be empty
>>-- and the executor predicate should contain the non-key predicate
>>prepare xx from select * from t010t1 where a=1 and b='1';

--- SQL command prepared.
>>explain xx;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... XX
PLAN_ID .................. 212281401899142448
ROWS_OUT ................. 1
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select * from t010t1 where a=1 and b='1';


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  olt_optimization ....... used
  max_card_est ........... 1
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 1
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  select_list ............ %(1), %('1')
  input_variables ........ %(1), %('1')


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T1
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 1
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T1
  cache_size ........... 100
  probes ................. 1
  rows_accessed .......... 1
  key_columns ............ A
  executor_predicates .... (B = %('1'))
  begin_key .............. (A = %(1))
  end_key ................ (A = %(1))

--- SQL operation complete.
>>
>>-- should see a full hbase SCAN
>>prepare xx from select * from t010t1 where b='1';

--- SQL command prepared.
>>explain xx;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... XX
PLAN_ID .................. 212281401899209560
ROWS_OUT ................ 10
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select * from t010t1 where b='1';


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................ 10
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality ... 10
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  select_list ............ TRAFODION.SCH.T010T1.A, %('1')
  input_variables ........ %('1')


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T1
REQUESTS_IN .............. 1
ROWS_OUT ................ 10
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T1
  columns ................ all
  begin_keys(incl)
  end_keys(incl)
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A
  executor_predicates .... (B = %('1'))

--- SQL operation complete.
>>
>>-- should see a unique hbase GET 
>>prepare xx from select * from t010t1 where a=1;

--- SQL command prepared.
>>explain xx;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... XX
PLAN_ID .................. 212281401898776021
ROWS_OUT ................. 1
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select * from t010t1 where a = 2;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  olt_optimization ....... used
  max_card_est ........... 1
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 1
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  select_list ............ %(2), TRAFODION.SCH.T010T1.B
  input_variables ........ %(2)


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T1
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 1
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T1
  cache_size ........... 100
  probes ................. 1
  rows_accessed .......... 1
  key_columns ............ A
  begin_key .............. (A = %(2))
  end_key ................ (A = %(2))

--- SQL operation complete.
>>
>>insert into t010t2 values
+>(1, 'a', 1, '1a1'),
+>(1, 'a', 3, '1a3'),
+>(1, 'a', 5, '1a5'),
+>(1, 'c', 1, '1c1'),
+>(2, 'a', 1, '2a1'),
+>(2, 'a', 2, '2a2'),
+>(2, 'c', 3, '2c3'),
+>(4, 'a', 1, '4a1'),
+>(4, 'b', 1, '4b1'),
+>(4, 'b', 2, '4b2');

--- 10 row(s) inserted.
>>
>>insert into t010t3 select * from t010t2;

--- 10 row(s) inserted.
>>
>>prepare x1 from
+>select * from t010t2 where a in (1,4) and b='a' and c = 1;

--- SQL command prepared.
>>
>>execute x1;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          4  a                     1  4a1       

--- 2 row(s) selected.
>>-- expect 1a1, 4a1
>>
>>prepare x2 from
+>select * from t010t2 where a in (1,2,4) and b='a' and (c in (1,3) or c>=5);

--- SQL command prepared.
>>execute x2;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          1  a                     5  1a5       
          2  a                     1  2a1       
          4  a                     1  4a1       

--- 5 row(s) selected.
>>-- expect 1a1, 1a3, 1a5, 2a1, 4a1
>>
>>prepare x3 from
+>select * from t010t2 where a in (1,2,4) and b='a' and c in (1,3);

--- SQL command prepared.
>>execute x3;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          2  a                     1  2a1       
          4  a                     1  4a1       

--- 4 row(s) selected.
>>-- expect 1a1, 1a3, 2a1, 4a1
>>
>>prepare x4 from
+>delete from t010t2 where a in (2,4,6) and b='a' and c in (1,3);

--- SQL command prepared.
>>execute x4;

--- 2 row(s) deleted.
>>-- expect 2 rows deleted, 2a1 and 4a1
>>execute x3;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       

--- 2 row(s) selected.
>>-- expect 1a1, 1a3
>>
>>insert into t010t2 values
+>(2, 'a', 1, '2a1'),
+>(4, 'a', 1, '4a1');

--- 2 row(s) inserted.
>>
>>prepare x5 from 
+>update t010t2 set d='upd' where a=4 and b in ('a', 'b') and c < 2;

--- SQL command prepared.
>>execute x5;

--- 2 row(s) updated.
>>-- execute 2 rows updated, 4a1 and 4b1
>>select * from t010t2;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          1  a                     5  1a5       
          1  c                     1  1c1       
          2  a                     1  2a1       
          2  a                     2  2a2       
          2  c                     3  2c3       
          4  a                     1  upd       
          4  b                     1  upd       
          4  b                     2  4b2       

--- 10 row(s) selected.
>>
>>cqd HBASE_MAX_NUM_SEARCH_KEYS '1';

--- SQL operation complete.
>>
>>prepare y1 from
+>select * from t010t2 where a in (1,4) and b='a' and c = 1;

--- SQL command prepared.
>>execute y1;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          4  a                     1  upd       

--- 2 row(s) selected.
>>-- expect 1a1, 4a1
>>
>>prepare y2 from
+>select * from t010t2 where a in (1,2,4) and b='a' and (c in (1,3) or c>=5);

--- SQL command prepared.
>>execute y2;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          1  a                     5  1a5       
          2  a                     1  2a1       
          4  a                     1  upd       

--- 5 row(s) selected.
>>-- expect 1a1, 1a3, 1a5, 2a1, 4a1
>>
>>prepare y3 from
+>select * from t010t2 where a in (1,2,4) and b='a' and c in (1,3);

--- SQL command prepared.
>>execute y3;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          2  a                     1  2a1       
          4  a                     1  upd       

--- 4 row(s) selected.
>>-- expect 1a1, 1a3, 2a1, 4a1
>>
>>prepare y4 from
+>delete from t010t2 where a in (2,4,6) and b='a' and c in (1,3);

--- SQL command prepared.
>>execute y4;

--- 2 row(s) deleted.
>>-- expect 2 rows deleted, 2a1 and 4a1
>>execute y3;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       

--- 2 row(s) selected.
>>-- expect 1a1, 1a3
>>
>>insert into t010t2 values
+>(2, 'a', 1, '2a1'),
+>(4, 'a', 1, '4a1');

--- 2 row(s) inserted.
>>
>>prepare y5 from 
+>update t010t2 set d='uuu' where a=4 and b in ('a', 'b') and c < 2;

--- SQL command prepared.
>>execute y5;

--- 2 row(s) updated.
>>-- execute 2 rows updated, 4a1 and 4b1
>>select * from t010t2;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          1  a                     5  1a5       
          1  c                     1  1c1       
          2  a                     1  2a1       
          2  a                     2  2a2       
          2  c                     3  2c3       
          4  a                     1  uuu       
          4  b                     1  uuu       
          4  b                     2  4b2       

--- 10 row(s) selected.
>>
>>cqd HBASE_MAX_NUM_SEARCH_KEYS reset;

--- SQL operation complete.
>>
>>explain x1;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X1
PLAN_ID .................. 212281401901403411
ROWS_OUT ................. 2
EST_TOTAL_COST ........... 0
STATEMENT ................ select *
                           from t010t2
                           where a in (1,4) and b='a' and c = 1;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 2
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  select_list ............ TRAFODION.SCH.T010T2.A, %('a'), %(1),
                             TRAFODION.SCH.T010T2.D
  input_variables ........ %('a'), %(1)


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  mdam_disjunct .......... ((A = 1) or (A = 4)) and (B = %('a')) and (C = %(1))

--- SQL operation complete.
>>explain x2;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X2
PLAN_ID .................. 212281401901469167
ROWS_OUT ................. 5
EST_TOTAL_COST ........... 0
STATEMENT ................ select *
                           from t010t2
                           where a in (1,2,4) and b='a' and (c in (1,
                             3) or c>=5);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 5
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 5
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  select_list ............ TRAFODION.SCH.T010T2.A, %('a'),
                             TRAFODION.SCH.T010T2.C, TRAFODION.SCH.T010T2.D
  input_variables ........ %('a')


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 5
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  mdam_disjunct .......... (((A = 1) or (A = 2)) or (A = 4)) and (B = %('a'))
                             and (((C = 1) or (C = 3)) or (C >= 5))

--- SQL operation complete.
>>explain x3;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X3
PLAN_ID .................. 212281401901552150
ROWS_OUT ................. 4
EST_TOTAL_COST ........... 0
STATEMENT ................ select *
                           from t010t2
                           where a in (1,2,4) and b='a' and c in (1,3);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 4
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  select_list ............ TRAFODION.SCH.T010T2.A, %('a'),
                             TRAFODION.SCH.T010T2.C, TRAFODION.SCH.T010T2.D
  input_variables ........ %('a')


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  mdam_disjunct .......... (((A = 1) or (A = 2)) or (A = 4)) and ((C = 1) or (C
                             = 3)) and (B = %('a'))

--- SQL operation complete.
>>explain x4;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X4
PLAN_ID .................. 212281401901632694
ROWS_OUT ................. 4
EST_TOTAL_COST ........... 0.01
STATEMENT ................ delete from t010t2
                           where a in (2,4,6) and b='a' and c in (1,3);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 4        ONLY CHILD 3
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 4
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 4
  total_overflow_size .... 0.00 KB
  upd_action_on_error .... xn_rollback
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  input_variables ........ %('a')


TUPLE_FLOW ================================  SEQ_NO 3        CHILDREN 1, 2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 4
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  join_type .............. inner
  join_method ............ in-order nested


TRAFODION_DELETE ==========================  SEQ_NO 2        NO CHILDREN
TABLE_NAME ............... TRAFODION.SCH.T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  iud_type ............... trafodion_delete TRAFODION.SCH.T010T2
  begin_key .............. (A = A) and (B = %('a')) and (C = C)
  end_key ................ (A = A) and (B = %('a')) and (C = C)


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  executor_predicates .... (B = %('a'))
  mdam_disjunct .......... (((A = 2) or (A = 4)) or (A = 6)) and ((C = 1) or (C
                             = 3)) and (B = %('a'))

--- SQL operation complete.
>>explain x5;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X5
PLAN_ID .................. 212281401901823463
ROWS_OUT ................. 2
EST_TOTAL_COST ........... 0
STATEMENT ................ update t010t2
                           set d='upd'
                           where a=4 and b in ('a', 'b') and c < 2;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  olt_optimization ....... used
  max_card_est ........... 2
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 2
  total_overflow_size .... 0.00 KB
  upd_action_on_error .... xn_rollback
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  input_variables ........ %('upd'), %(4)


TRAFODION_UPDATE ==========================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... TRAFODION.SCH.T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est ........... 2
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  iud_type ............... trafodion_update TRAFODION.SCH.T010T2
  new_rec_expr ........... (D assign %('upd'))
  predicate .............. (C < 2) and ((B = 'a') or (B = 'b'))
  begin_key .............. (A = %(4)) and (B = '<min>') and (C = <min>)
  end_key ................ (A = %(4)) and (B = '<max>') and (C = 2)

--- SQL operation complete.
>>explain y1;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y1
PLAN_ID .................. 212281401901907994
ROWS_OUT ................. 2
EST_TOTAL_COST ........... 0
STATEMENT ................ select *
                           from t010t2
                           where a in (1,4) and b='a' and c = 1;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 2
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  HBASE_MAX_NUM_SEARCH_KE  1
  select_list ............ TRAFODION.SCH.T010T2.A, %('a'), %(1),
                             TRAFODION.SCH.T010T2.D
  input_variables ........ %('a'), %(1)


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  mdam_disjunct .......... ((A = 1) or (A = 4)) and (B = %('a')) and (C = %(1))

--- SQL operation complete.
>>explain y2;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y2
PLAN_ID .................. 212281401901974513
ROWS_OUT ................. 5
EST_TOTAL_COST ........... 0
STATEMENT ................ select *
                           from t010t2
                           where a in (1,2,4) and b='a' and (c in (1,
                             3) or c>=5);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 5
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 5
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  HBASE_MAX_NUM_SEARCH_KE  1
  select_list ............ TRAFODION.SCH.T010T2.A, %('a'),
                             TRAFODION.SCH.T010T2.C, TRAFODION.SCH.T010T2.D
  input_variables ........ %('a')


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 5
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  mdam_disjunct .......... (((A = 1) or (A = 2)) or (A = 4)) and (B = %('a'))
                             and (((C = 1) or (C = 3)) or (C >= 5))

--- SQL operation complete.
>>explain y3;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y3
PLAN_ID .................. 212281401902059673
ROWS_OUT ................. 4
EST_TOTAL_COST ........... 0
STATEMENT ................ select *
                           from t010t2
                           where a in (1,2,4) and b='a' and c in (1,3);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 4
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  HBASE_MAX_NUM_SEARCH_KE  1
  select_list ............ TRAFODION.SCH.T010T2.A, %('a'),
                             TRAFODION.SCH.T010T2.C, TRAFODION.SCH.T010T2.D
  input_variables ........ %('a')


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  mdam_disjunct .......... (((A = 1) or (A = 2)) or (A = 4)) and ((C = 1) or (C
                             = 3)) and (B = %('a'))

--- SQL operation complete.
>>explain y4;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y4
PLAN_ID .................. 212281401902141278
ROWS_OUT ................. 4
EST_TOTAL_COST ........... 0.01
STATEMENT ................ delete from t010t2
                           where a in (2,4,6) and b='a' and c in (1,3);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 4        ONLY CHILD 3
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 4
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 4
  total_overflow_size .... 0.00 KB
  upd_action_on_error .... xn_rollback
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  HBASE_MAX_NUM_SEARCH_KE  1
  input_variables ........ %('a')


TUPLE_FLOW ================================  SEQ_NO 3        CHILDREN 1, 2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 4
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  join_type .............. inner
  join_method ............ in-order nested


TRAFODION_DELETE ==========================  SEQ_NO 2        NO CHILDREN
TABLE_NAME ............... TRAFODION.SCH.T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  iud_type ............... trafodion_delete TRAFODION.SCH.T010T2
  begin_key .............. (A = A) and (B = %('a')) and (C = C)
  end_key ................ (A = A) and (B = %('a')) and (C = C)


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  executor_predicates .... (B = %('a'))
  mdam_disjunct .......... (((A = 2) or (A = 4)) or (A = 6)) and ((C = 1) or (C
                             = 3)) and (B = %('a'))

--- SQL operation complete.
>>explain y5;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y5
PLAN_ID .................. 212281401902320949
ROWS_OUT ................. 2
EST_TOTAL_COST ........... 0
STATEMENT ................ update t010t2
                           set d='uuu'
                           where a=4 and b in ('a', 'b') and c < 2;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  olt_optimization ....... used
  max_card_est ........... 2
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 2
  total_overflow_size .... 0.00 KB
  upd_action_on_error .... xn_rollback
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ........ 1,024
  MDAM_SCAN_METHOD ....... ON
  HBASE_MAX_NUM_SEARCH_KE  1
  input_variables ........ %('uuu'), %(4)


TRAFODION_UPDATE ==========================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... TRAFODION.SCH.T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est ........... 2
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  iud_type ............... trafodion_update TRAFODION.SCH.T010T2
  new_rec_expr ........... (D assign %('uuu'))
  predicate .............. (C < 2) and ((B = 'a') or (B = 'b'))
  begin_key .............. (A = %(4)) and (B = '<min>') and (C = <min>)
  end_key ................ (A = %(4)) and (B = '<max>') and (C = 2)

--- SQL operation complete.
>>
>>select "_SALT_", * from t010t3 order by a,b,c;

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         2            1  a                     1  1a1       
         2            1  a                     3  1a3       
         2            1  a                     5  1a5       
         1            1  c                     1  1c1       
         3            2  a                     1  2a1       
         3            2  a                     2  2a2       
         0            2  c                     3  2c3       
         2            4  a                     1  4a1       
         1            4  b                     1  4b1       
         1            4  b                     2  4b2       

--- 10 row(s) selected.
>>select "_SALT_", * from t010t3 where a=1 and b='c';

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         1            1  c                     1  1c1       

--- 1 row(s) selected.
>>
>>update t010t3 set d='2axu' where a=2 and b='a';

--- 2 row(s) updated.
>>-- 2 rows updated
>>update t010t3 set d='4b1u' where a=4 and b='b' and c <= 1;

--- 1 row(s) updated.
>>-- 1 row updated
>>update t010t3 set a=3 where a=2;

--- 3 row(s) updated.
>>-- 3 rows updated
>>delete from t010t3 where a=3 and b='c' and c=3;

--- 1 row(s) deleted.
>>-- 1 row deleted
>>delete from t010t3 where d like '2%u %';

--- 2 row(s) deleted.
>>-- 2 rows deleted
>>select "_SALT_", * from t010t3;

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         1            1  c                     1  1c1       
         1            4  b                     1  4b1u      
         1            4  b                     2  4b2       
         2            1  a                     1  1a1       
         2            1  a                     3  1a3       
         2            1  a                     5  1a5       
         2            4  a                     1  4a1       

--- 7 row(s) selected.
>>-- 7 rows
>>merge into t010t3
+>  using (select * from t010t2) as src
+>  on ((src.a, src.b, src.c) = (a,b,c))
+>when matched
+>  then update set d = src.d
+>when not matched
+>  then insert values (src.a, src.b, src.c, src.d)
+>;

--- 10 row(s) updated.
>>-- 10 rows updated
>>select "_SALT_", * from t010t2 natural join t010t3 order by a,b,c;

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         2            1  a                     1  1a1       
         2            1  a                     3  1a3       
         2            1  a                     5  1a5       
         1            1  c                     1  1c1       
         3            2  a                     1  2a1       
         3            2  a                     2  2a2       
         0            2  c                     3  2c3       
         2            4  a                     1  uuu       
         1            4  b                     1  uuu       
         1            4  b                     2  4b2       

--- 10 row(s) selected.
>>-- expect 10 rows, same as each individual table
>>
>>select "_SALT_", * from table(table t010t3, partition number 4);

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         3            2  a                     1  2a1       
         3            2  a                     2  2a2       

--- 2 row(s) selected.
>>select "_SALT_", * from table(table t010t3, partition number from 1 to 3);

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         0            2  c                     3  2c3       
         1            1  c                     1  1c1       
         1            4  b                     1  uuu       
         1            4  b                     2  4b2       
         2            1  a                     1  1a1       
         2            1  a                     3  1a3       
         2            1  a                     5  1a5       
         2            4  a                     1  uuu       

--- 8 row(s) selected.
>>-- 2 statements above must return 10 rows total
>>
>>
>>-- query_cache off, mdam_scan_method on
>>cqd query_cache '0';

--- SQL operation complete.
>>cqd mdam_scan_method 'ON';

--- SQL operation complete.
>>obey TEST010(clean_up);
>>--------------------------------------------------------------------------
>>drop table if exists t010t1;

--- SQL operation complete.
>>drop table if exists t010t2;

--- SQL operation complete.
>>drop table if exists t010t3;

--- SQL operation complete.
>>
>>obey TEST010(tests);
>>--------------------------------------------------------------------------
>>
>>create table if not exists t010t1 (a int not null, b char(10), primary key(a));

--- SQL operation complete.
>>create table if not exists t010t2 (a int not null, b char(10) not null, c int not null, d char(10), primary key(a,b,c));

--- SQL operation complete.
>>create table if not exists t010t3 (a int not null, b char(10) not null, c int not null, d char(10), primary key(a,b,c))
+>  salt using 4 partitions on (a,b);

--- SQL operation complete.
>>
>>invoke t010t1;

-- Definition of Trafodion table TRAFODION.SCH.T010T1
-- Definition current  Thu Oct 30 04:05:19 2014

  (
    A                                INT NO DEFAULT NOT NULL NOT DROPPABLE
  , B                                CHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT DEFAULT NULL
  )

--- SQL operation complete.
>>invoke hbase."_CELL_"."TRAFODION.SCH.T010T1";

-- Definition of Trafodion table HBASE."_CELL_"."TRAFODION.SCH.T010T1"
-- Definition current  Thu Oct 30 04:05:19 2014

  (
    ROW_ID                           VARCHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , COL_FAMILY                       VARCHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , COL_NAME                         VARCHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , COL_TIMESTAMP                    LARGEINT NO DEFAULT NOT NULL NOT DROPPABLE
  , COL_VALUE                        VARCHAR(20) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  )

--- SQL operation complete.
>>invoke hbase."_ROW_"."TRAFODION.SCH.T010T1";

-- Definition of Trafodion table HBASE."_ROW_"."TRAFODION.SCH.T010T1"
-- Definition current  Thu Oct 30 04:05:19 2014

  (
    ROW_ID                           VARCHAR(10) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , COLUMN_DETAILS                   VARCHAR(60) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  )

--- SQL operation complete.
>>
>>insert into t010t1 values (1, 'a'), (2, 'b'), (3, 'c');

--- 3 row(s) inserted.
>>
>>select * from t010t1;

A            B         
-----------  ----------

          1  a         
          2  b         
          3  c         

--- 3 row(s) selected.
>>
>>select * from t010t1 where a = 2;

A            B         
-----------  ----------

          2  b         

--- 1 row(s) selected.
>>
>>select * from t010t1 where a = 2 or a = 3;

A            B         
-----------  ----------

          2  b         
          3  c         

--- 2 row(s) selected.
>>
>>delete from t010t1 where a = 4;

--- 0 row(s) deleted.
>>
>>select * from t010t1;

A            B         
-----------  ----------

          1  a         
          2  b         
          3  c         

--- 3 row(s) selected.
>>
>>delete from t010t1 where a = 2;

--- 1 row(s) deleted.
>>
>>select * from t010t1;

A            B         
-----------  ----------

          1  a         
          3  c         

--- 2 row(s) selected.
>>
>>select converttohex(cast(row_id as char(4))) rowid,
+>          converttohex(cast(col_family as char(2))) colfamily,
+>          converttohex(cast(col_name as char(1))) colname,
+>          converttohex(cast(col_value as char(4))) colvalue
+>                from hbase."_CELL_"."TRAFODION.SCH.T010T1";

ROWID     COLFAMILY  COLNAME  COLVALUE
--------  ---------  -------  --------

80000001  2331       01       80000001
80000001  2331       02       00612020
80000003  2331       01       80000003
80000003  2331       02       00632020

--- 4 row(s) selected.
>>
>>select converttohex(cast(row_id as char(4))) rowid,
+>          converttohex(cast(col_family as char(2))) colfamily,
+>          converttohex(cast(col_name as char(1))) colname,
+>          converttohex(cast(col_value as char(4))) colvalue
+>                from hbase."_CELL_"."TRAFODION.SCH.T010T1"
+>          where converttohex(cast(row_id as char(4))) = '80000001';

ROWID     COLFAMILY  COLNAME  COLVALUE
--------  ---------  -------  --------

80000001  2331       01       80000001
80000001  2331       02       00612020

--- 2 row(s) selected.
>>
>>select converttohex(cast(row_id as char(4))) rowid,
+>          converttohex(cast(column_details as char(40))) coldetails
+>                 from hbase."_ROW_"."TRAFODION.SCH.T010T1";

ROWID     COLDETAILS
--------  --------------------------------------------------------------------------------

80000001  040023313A010400000080000001040023313A020B00000000612020202020202020202020202020
80000003  040023313A010400000080000003040023313A020B00000000632020202020202020202020202020

--- 2 row(s) selected.
>>select converttohex(cast(row_id as char(4))) rowid,
+>          converttohex(cast(column_details as char(40))) coldetails
+>                 from hbase."_ROW_"."TRAFODION.SCH.T010T1"
+>          where converttohex(cast(row_id as char(4))) = '80000001';

ROWID     COLDETAILS
--------  --------------------------------------------------------------------------------

80000001  040023313A010400000080000001040023313A020B00000000612020202020202020202020202020

--- 1 row(s) selected.
>>
>>-------------------
>>-- check query plan
>>-------------------
>>
>>-- no sort operator should present when order by on primary key column
>>prepare xx from select * from t010t1 order by a;

--- SQL command prepared.
>>explain options 'f' xx;

LC   RC   OP   OPERATOR              OPT       DESCRIPTION           CARD
---- ---- ---- --------------------  --------  --------------------  ---------

1    .    2    root                                                  1.00E+002
.    .    1    trafodion_scan                  T010T1                1.00E+002

--- SQL operation complete.
>>
>>-- should see a sort when order by on non key column
>>prepare xx from select * from t010t1 order by b;

--- SQL command prepared.
>>explain options 'f' xx;

LC   RC   OP   OPERATOR              OPT       DESCRIPTION           CARD
---- ---- ---- --------------------  --------  --------------------  ---------

2    .    3    root                                                  1.00E+002
1    .    2    sort                                                  1.00E+002
.    .    1    trafodion_scan                  T010T1                1.00E+002

--- SQL operation complete.
>>
>>-- selectPred should present due to the 2nd disjunct b='1'
>>prepare xx from select * from t010t1 where a=1 or b='1';

--- SQL command prepared.
>>explain xx;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... XX
PLAN_ID .................. 212281401920012128
ROWS_OUT ................ 11
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select * from t010t1 where a=1 or b='1';


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................ 11
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 51
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality ... 11
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON
  select_list ............ TRAFODION.SCH.T010T1.A, TRAFODION.SCH.T010T1.B


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T1
REQUESTS_IN .............. 1
ROWS_OUT ................ 11
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 51
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T1
  columns ................ all
  begin_keys(incl)
  end_keys(incl)
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A
  executor_predicates .... ((A = 1) or (B = '1'))

--- SQL operation complete.
>>
>>-- Optimization: with only one disjunct, the selectPred should be empty
>>-- and the executor predicate should contain the non-key predicate
>>prepare xx from select * from t010t1 where a=1 and b='1';

--- SQL command prepared.
>>explain xx;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... XX
PLAN_ID .................. 212281401920074784
ROWS_OUT ................. 1
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select * from t010t1 where a=1 and b='1';


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  olt_optimization ....... used
  max_card_est ........... 1
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 1
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON
  select_list ............ 1, '1'


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T1
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 1
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T1
  columns ................ all
  unique_rows ............ 1
  cache_size ........... 100
  probes ................. 1
  rows_accessed .......... 1
  key_columns ............ A
  executor_predicates .... (B = '1')

--- SQL operation complete.
>>
>>-- should see a full hbase SCAN
>>prepare xx from select * from t010t1 where b='1';

--- SQL command prepared.
>>explain xx;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... XX
PLAN_ID .................. 212281401920134983
ROWS_OUT ................ 10
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select * from t010t1 where b='1';


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................ 10
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality ... 10
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON
  select_list ............ TRAFODION.SCH.T010T1.A, '1'


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T1
REQUESTS_IN .............. 1
ROWS_OUT ................ 10
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T1
  columns ................ all
  begin_keys(incl)
  end_keys(incl)
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A
  executor_predicates .... (B = '1')

--- SQL operation complete.
>>
>>-- should see a unique hbase GET 
>>prepare xx from select * from t010t1 where a=1;

--- SQL command prepared.
>>explain xx;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... XX
PLAN_ID .................. 212281401920196090
ROWS_OUT ................. 1
EST_TOTAL_COST ........... 0.01
STATEMENT ................ select * from t010t1 where a=1;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  olt_optimization ....... used
  max_card_est ........... 1
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 1
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON
  select_list ............ 1, TRAFODION.SCH.T010T1.B


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T1
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 1
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan of table TRAFODION.SCH.T010T1
  columns ................ all
  unique_rows ............ 1
  cache_size ........... 100
  probes ................. 1
  rows_accessed .......... 1
  key_columns ............ A

--- SQL operation complete.
>>
>>insert into t010t2 values
+>(1, 'a', 1, '1a1'),
+>(1, 'a', 3, '1a3'),
+>(1, 'a', 5, '1a5'),
+>(1, 'c', 1, '1c1'),
+>(2, 'a', 1, '2a1'),
+>(2, 'a', 2, '2a2'),
+>(2, 'c', 3, '2c3'),
+>(4, 'a', 1, '4a1'),
+>(4, 'b', 1, '4b1'),
+>(4, 'b', 2, '4b2');

--- 10 row(s) inserted.
>>
>>insert into t010t3 select * from t010t2;

--- 10 row(s) inserted.
>>
>>prepare x1 from
+>select * from t010t2 where a in (1,4) and b='a' and c = 1;

--- SQL command prepared.
>>
>>execute x1;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          4  a                     1  4a1       

--- 2 row(s) selected.
>>-- expect 1a1, 4a1
>>
>>prepare x2 from
+>select * from t010t2 where a in (1,2,4) and b='a' and (c in (1,3) or c>=5);

--- SQL command prepared.
>>execute x2;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          1  a                     5  1a5       
          2  a                     1  2a1       
          4  a                     1  4a1       

--- 5 row(s) selected.
>>-- expect 1a1, 1a3, 1a5, 2a1, 4a1
>>
>>prepare x3 from
+>select * from t010t2 where a in (1,2,4) and b='a' and c in (1,3);

--- SQL command prepared.
>>execute x3;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          2  a                     1  2a1       
          4  a                     1  4a1       

--- 4 row(s) selected.
>>-- expect 1a1, 1a3, 2a1, 4a1
>>
>>prepare x4 from
+>delete from t010t2 where a in (2,4,6) and b='a' and c in (1,3);

--- SQL command prepared.
>>execute x4;

--- 2 row(s) deleted.
>>-- expect 2 rows deleted, 2a1 and 4a1
>>execute x3;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       

--- 2 row(s) selected.
>>-- expect 1a1, 1a3
>>
>>insert into t010t2 values
+>(2, 'a', 1, '2a1'),
+>(4, 'a', 1, '4a1');

--- 2 row(s) inserted.
>>
>>prepare x5 from 
+>update t010t2 set d='upd' where a=4 and b in ('a', 'b') and c < 2;

--- SQL command prepared.
>>execute x5;

--- 2 row(s) updated.
>>-- execute 2 rows updated, 4a1 and 4b1
>>select * from t010t2;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          1  a                     5  1a5       
          1  c                     1  1c1       
          2  a                     1  2a1       
          2  a                     2  2a2       
          2  c                     3  2c3       
          4  a                     1  upd       
          4  b                     1  upd       
          4  b                     2  4b2       

--- 10 row(s) selected.
>>
>>cqd HBASE_MAX_NUM_SEARCH_KEYS '1';

--- SQL operation complete.
>>
>>prepare y1 from
+>select * from t010t2 where a in (1,4) and b='a' and c = 1;

--- SQL command prepared.
>>execute y1;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          4  a                     1  upd       

--- 2 row(s) selected.
>>-- expect 1a1, 4a1
>>
>>prepare y2 from
+>select * from t010t2 where a in (1,2,4) and b='a' and (c in (1,3) or c>=5);

--- SQL command prepared.
>>execute y2;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          1  a                     5  1a5       
          2  a                     1  2a1       
          4  a                     1  upd       

--- 5 row(s) selected.
>>-- expect 1a1, 1a3, 1a5, 2a1, 4a1
>>
>>prepare y3 from
+>select * from t010t2 where a in (1,2,4) and b='a' and c in (1,3);

--- SQL command prepared.
>>execute y3;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          2  a                     1  2a1       
          4  a                     1  upd       

--- 4 row(s) selected.
>>-- expect 1a1, 1a3, 2a1, 4a1
>>
>>prepare y4 from
+>delete from t010t2 where a in (2,4,6) and b='a' and c in (1,3);

--- SQL command prepared.
>>execute y4;

--- 2 row(s) deleted.
>>-- expect 2 rows deleted, 2a1 and 4a1
>>execute y3;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       

--- 2 row(s) selected.
>>-- expect 1a1, 1a3
>>
>>insert into t010t2 values
+>(2, 'a', 1, '2a1'),
+>(4, 'a', 1, '4a1');

--- 2 row(s) inserted.
>>
>>prepare y5 from 
+>update t010t2 set d='uuu' where a=4 and b in ('a', 'b') and c < 2;

--- SQL command prepared.
>>execute y5;

--- 2 row(s) updated.
>>-- execute 2 rows updated, 4a1 and 4b1
>>select * from t010t2;

A            B           C            D         
-----------  ----------  -----------  ----------

          1  a                     1  1a1       
          1  a                     3  1a3       
          1  a                     5  1a5       
          1  c                     1  1c1       
          2  a                     1  2a1       
          2  a                     2  2a2       
          2  c                     3  2c3       
          4  a                     1  uuu       
          4  b                     1  uuu       
          4  b                     2  4b2       

--- 10 row(s) selected.
>>
>>cqd HBASE_MAX_NUM_SEARCH_KEYS reset;

--- SQL operation complete.
>>
>>explain x1;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X1
PLAN_ID .................. 212281401922263438
ROWS_OUT ................. 2
EST_TOTAL_COST ........... 0
STATEMENT ................ select *
                           from t010t2
                           where a in (1,4) and b='a' and c = 1;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 2
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON
  select_list ............ TRAFODION.SCH.T010T2.A, 'a', 1,
                             TRAFODION.SCH.T010T2.D


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  mdam_disjunct .......... ((A = 1) or (A = 4)) and (B = 'a') and (C = 1)

--- SQL operation complete.
>>explain x2;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X2
PLAN_ID .................. 212281401922324392
ROWS_OUT ................. 5
EST_TOTAL_COST ........... 0
STATEMENT ................ select *
                           from t010t2
                           where a in (1,2,4) and b='a' and (c in (1,
                             3) or c>=5);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 5
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 5
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON
  select_list ............ TRAFODION.SCH.T010T2.A, 'a', TRAFODION.SCH.T010T2.C,
                             TRAFODION.SCH.T010T2.D


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 5
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  mdam_disjunct .......... (((A = 1) or (A = 2)) or (A = 4)) and (B = 'a') and
                             (((C = 1) or (C = 3)) or (C >= 5))

--- SQL operation complete.
>>explain x3;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X3
PLAN_ID .................. 212281401922403957
ROWS_OUT ................. 4
EST_TOTAL_COST ........... 0
STATEMENT ................ select *
                           from t010t2
                           where a in (1,2,4) and b='a' and c in (1,3);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 4
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON
  select_list ............ TRAFODION.SCH.T010T2.A, 'a', TRAFODION.SCH.T010T2.C,
                             TRAFODION.SCH.T010T2.D


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  mdam_disjunct .......... (((A = 1) or (A = 2)) or (A = 4)) and ((C = 1) or (C
                             = 3)) and (B = 'a')

--- SQL operation complete.
>>explain x4;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X4
PLAN_ID .................. 212281401922484953
ROWS_OUT ................. 4
EST_TOTAL_COST ........... 0.01
STATEMENT ................ delete from t010t2
                           where a in (2,4,6) and b='a' and c in (1,3);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 4        ONLY CHILD 3
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 4
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 4
  total_overflow_size .... 0.00 KB
  upd_action_on_error .... xn_rollback
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON


TUPLE_FLOW ================================  SEQ_NO 3        CHILDREN 1, 2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 4
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  join_type .............. inner
  join_method ............ in-order nested


TRAFODION_DELETE ==========================  SEQ_NO 2        NO CHILDREN
TABLE_NAME ............... TRAFODION.SCH.T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  iud_type ............... trafodion_delete TRAFODION.SCH.T010T2
  begin_key .............. (A = A) and (B = 'a') and (C = C)
  end_key ................ (A = A) and (B = 'a') and (C = C)


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  executor_predicates .... (B = 'a')
  mdam_disjunct .......... (((A = 2) or (A = 4)) or (A = 6)) and ((C = 1) or (C
                             = 3)) and (B = 'a')

--- SQL operation complete.
>>explain x5;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... X5
PLAN_ID .................. 212281401922649470
ROWS_OUT ................. 2
EST_TOTAL_COST ........... 0
STATEMENT ................ update t010t2
                           set d='upd'
                           where a=4 and b in ('a', 'b') and c < 2;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  olt_optimization ....... used
  max_card_est ........... 2
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 2
  total_overflow_size .... 0.00 KB
  upd_action_on_error .... xn_rollback
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON


TRAFODION_UPDATE ==========================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... TRAFODION.SCH.T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est ........... 2
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  iud_type ............... trafodion_update TRAFODION.SCH.T010T2
  columns ................ all
  begin_keys(incl) ....... 4,a,-2147483648
  end_keys(excl) ......... 4,a,2
  columns ................ all
  begin_keys(incl) ....... 4,b,-2147483648
  end_keys(excl) ......... 4,b,2
  new_rec_expr ........... (D assign 'upd')

--- SQL operation complete.
>>explain y1;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y1
PLAN_ID .................. 212281401922726813
ROWS_OUT ................. 2
EST_TOTAL_COST ........... 0
STATEMENT ................ select *
                           from t010t2
                           where a in (1,4) and b='a' and c = 1;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 2
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON
  HBASE_MAX_NUM_SEARCH_KE  1
  select_list ............ TRAFODION.SCH.T010T2.A, 'a', 1,
                             TRAFODION.SCH.T010T2.D


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  mdam_disjunct .......... ((A = 1) or (A = 4)) and (B = 'a') and (C = 1)

--- SQL operation complete.
>>explain y2;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y2
PLAN_ID .................. 212281401922788920
ROWS_OUT ................. 5
EST_TOTAL_COST ........... 0
STATEMENT ................ select *
                           from t010t2
                           where a in (1,2,4) and b='a' and (c in (1,
                             3) or c>=5);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 5
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 5
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON
  HBASE_MAX_NUM_SEARCH_KE  1
  select_list ............ TRAFODION.SCH.T010T2.A, 'a', TRAFODION.SCH.T010T2.C,
                             TRAFODION.SCH.T010T2.D


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 5
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  mdam_disjunct .......... (((A = 1) or (A = 2)) or (A = 4)) and (B = 'a') and
                             (((C = 1) or (C = 3)) or (C >= 5))

--- SQL operation complete.
>>explain y3;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y3
PLAN_ID .................. 212281401922869054
ROWS_OUT ................. 4
EST_TOTAL_COST ........... 0
STATEMENT ................ select *
                           from t010t2
                           where a in (1,2,4) and b='a' and c in (1,3);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 4
  total_overflow_size .... 0.00 KB
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON
  HBASE_MAX_NUM_SEARCH_KE  1
  select_list ............ TRAFODION.SCH.T010T2.A, 'a', TRAFODION.SCH.T010T2.C,
                             TRAFODION.SCH.T010T2.D


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  mdam_disjunct .......... (((A = 1) or (A = 2)) or (A = 4)) and ((C = 1) or (C
                             = 3)) and (B = 'a')

--- SQL operation complete.
>>explain y4;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y4
PLAN_ID .................. 212281401922949635
ROWS_OUT ................. 4
EST_TOTAL_COST ........... 0.01
STATEMENT ................ delete from t010t2
                           where a in (2,4,6) and b='a' and c in (1,3);


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 4        ONLY CHILD 3
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 4
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 4
  total_overflow_size .... 0.00 KB
  upd_action_on_error .... xn_rollback
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON
  HBASE_MAX_NUM_SEARCH_KE  1


TUPLE_FLOW ================================  SEQ_NO 3        CHILDREN 1, 2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0.01
EST_TOTAL_COST ........... 0.01
DESCRIPTION
  max_card_est ........... 4
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  join_type .............. inner
  join_method ............ in-order nested


TRAFODION_DELETE ==========================  SEQ_NO 2        NO CHILDREN
TABLE_NAME ............... TRAFODION.SCH.T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 1
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  iud_type ............... trafodion_delete TRAFODION.SCH.T010T2
  begin_key .............. (A = A) and (B = 'a') and (C = C)
  end_key ................ (A = A) and (B = 'a') and (C = C)


TRAFODION_SCAN ============================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 4
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est .......... 99
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  scan_type .............. subset scan limited by mdam of table
                             TRAFODION.SCH.T010T2
  cache_size ........... 100
  probes ................. 1
  rows_accessed ........ 100
  key_columns ............ A, B, C
  executor_predicates .... (B = 'a')
  mdam_disjunct .......... (((A = 2) or (A = 4)) or (A = 6)) and ((C = 1) or (C
                             = 3)) and (B = 'a')

--- SQL operation complete.
>>explain y5;

------------------------------------------------------------------ PLAN SUMMARY
MODULE_NAME .............. DYNAMICALLY COMPILED
STATEMENT_NAME ........... Y5
PLAN_ID .................. 212281401923108961
ROWS_OUT ................. 2
EST_TOTAL_COST ........... 0
STATEMENT ................ update t010t2
                           set d='uuu'
                           where a=4 and b in ('a', 'b') and c < 2;


------------------------------------------------------------------ NODE LISTING
ROOT ======================================  SEQ_NO 2        ONLY CHILD 1
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  olt_optimization ....... used
  max_card_est ........... 2
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  statement_index ........ 0
  affinity_value ......... 0
  max_max_cardinality .... 2
  total_overflow_size .... 0.00 KB
  upd_action_on_error .... xn_rollback
  xn_access_mode ......... read_only
  xn_autoabort_interval    0
  auto_query_retry ....... enabled
  plan_version ....... 2,600
  embedded_arkcmp ........ used
  IS_SQLCI ............... ON
  LDAP_USERNAME
  MODE_SEABASE ........... ON
  SEABASE_VOLATILE_TABLES  ON
  HBASE_ASYNC_DROP_TABLE   OFF
  SCHEMA ................. TRAFODION.SCH
  HBASE_MAX_COLUMN_NAME_  10
  HBASE_MAX_COLUMN_VAL_L  20
  HBASE_MAX_COLUMN_INFO_  60
  HBASE_SERIALIZATION .... ON
  HBASE_FILTER_PREDS ..... ON
  QUERY_CACHE ............ 0
  MDAM_SCAN_METHOD ....... ON
  HBASE_MAX_NUM_SEARCH_KE  1


TRAFODION_UPDATE ==========================  SEQ_NO 1        NO CHILDREN
TABLE_NAME ............... TRAFODION.SCH.T010T2
REQUESTS_IN .............. 1
ROWS_OUT ................. 2
EST_OPER_COST ............ 0
EST_TOTAL_COST ........... 0
DESCRIPTION
  max_card_est ........... 2
  fragment_id ............ 0
  parent_frag ............ (none)
  fragment_type .......... master
  iud_type ............... trafodion_update TRAFODION.SCH.T010T2
  columns ................ all
  begin_keys(incl) ....... 4,,-2147483648
  end_keys(incl) ......... 4,??????????,2
  new_rec_expr ........... (D assign 'uuu')
  predicate .............. ((B = 'a') or (B = 'b')) and (C < 2)

--- SQL operation complete.
>>
>>select "_SALT_", * from t010t3 order by a,b,c;

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         2            1  a                     1  1a1       
         2            1  a                     3  1a3       
         2            1  a                     5  1a5       
         1            1  c                     1  1c1       
         3            2  a                     1  2a1       
         3            2  a                     2  2a2       
         0            2  c                     3  2c3       
         2            4  a                     1  4a1       
         1            4  b                     1  4b1       
         1            4  b                     2  4b2       

--- 10 row(s) selected.
>>select "_SALT_", * from t010t3 where a=1 and b='c';

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         1            1  c                     1  1c1       

--- 1 row(s) selected.
>>
>>update t010t3 set d='2axu' where a=2 and b='a';

--- 2 row(s) updated.
>>-- 2 rows updated
>>update t010t3 set d='4b1u' where a=4 and b='b' and c <= 1;

--- 1 row(s) updated.
>>-- 1 row updated
>>update t010t3 set a=3 where a=2;

--- 3 row(s) updated.
>>-- 3 rows updated
>>delete from t010t3 where a=3 and b='c' and c=3;

--- 1 row(s) deleted.
>>-- 1 row deleted
>>delete from t010t3 where d like '2%u %';

--- 2 row(s) deleted.
>>-- 2 rows deleted
>>select "_SALT_", * from t010t3;

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         1            1  c                     1  1c1       
         1            4  b                     1  4b1u      
         1            4  b                     2  4b2       
         2            1  a                     1  1a1       
         2            1  a                     3  1a3       
         2            1  a                     5  1a5       
         2            4  a                     1  4a1       

--- 7 row(s) selected.
>>-- 7 rows
>>merge into t010t3
+>  using (select * from t010t2) as src
+>  on ((src.a, src.b, src.c) = (a,b,c))
+>when matched
+>  then update set d = src.d
+>when not matched
+>  then insert values (src.a, src.b, src.c, src.d)
+>;

--- 10 row(s) updated.
>>-- 10 rows updated
>>select "_SALT_", * from t010t2 natural join t010t3 order by a,b,c;

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         2            1  a                     1  1a1       
         2            1  a                     3  1a3       
         2            1  a                     5  1a5       
         1            1  c                     1  1c1       
         3            2  a                     1  2a1       
         3            2  a                     2  2a2       
         0            2  c                     3  2c3       
         2            4  a                     1  uuu       
         1            4  b                     1  uuu       
         1            4  b                     2  4b2       

--- 10 row(s) selected.
>>-- expect 10 rows, same as each individual table
>>
>>select "_SALT_", * from table(table t010t3, partition number 4);

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         3            2  a                     1  2a1       
         3            2  a                     2  2a2       

--- 2 row(s) selected.
>>select "_SALT_", * from table(table t010t3, partition number from 1 to 3);

_SALT_      A            B           C            D         
----------  -----------  ----------  -----------  ----------

         0            2  c                     3  2c3       
         1            1  c                     1  1c1       
         1            4  b                     1  uuu       
         1            4  b                     2  4b2       
         2            1  a                     1  1a1       
         2            1  a                     3  1a3       
         2            1  a                     5  1a5       
         2            4  a                     1  uuu       

--- 8 row(s) selected.
>>-- 2 statements above must return 10 rows total
>>
>>
>>-- other mdam queries
>>cqd mdam_scan_method 'ON';

--- SQL operation complete.
>>cqd query_cache '1024';

--- SQL operation complete.
>>obey TEST010(otherMdam);
>>drop table if exists minotaur.events_load75;

--- SQL operation complete.
>>CREATE TABLE if not exists TRAFODION.MINOTAUR.EVENTS_LOAD75
+>  (
+>    SRCIP                            CHAR(45) CHARACTER SET ISO88591 COLLATE
+>      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
+>  , SRCPORT                          INT NO DEFAULT NOT NULL NOT DROPPABLE
+>  , DSTIP                            VARCHAR(45) CHARACTER SET ISO88591 COLLATE
+>      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
+>  , DSTPORT                          INT NO DEFAULT NOT NULL NOT DROPPABLE
+>  , AGENTRECEIPTTIME                 TIMESTAMP(0) NO DEFAULT NOT NULL NOT
+>      DROPPABLE
+>  , CATEGORYOUTCOME                  VARCHAR(30) CHARACTER SET ISO88591 COLLATE
+>      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
+>  , CATEGORYSIGNIFICANCE             VARCHAR(30) CHARACTER SET ISO88591 COLLATE
+>      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
+>  , DEVICESEVERITY                   VARCHAR(30) CHARACTER SET ISO88591 COLLATE
+>      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
+>  , CATEGORYDEVICETYPE               VARCHAR(30) CHARACTER SET ISO88591 COLLATE
+>      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
+>  , DEVICECUSTOMSTRING1              VARCHAR(30) CHARACTER SET ISO88591 COLLATE
+>      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
+>  , FLEXSTRING1                      VARCHAR(30) CHARACTER SET ISO88591 COLLATE
+>      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
+>  , EVENT_ID                         LARGEINT NO DEFAULT NOT NULL NOT DROPPABLE
+>  , PRIMARY KEY (EVENT_ID ASC,SRCIP ASC, AGENTRECEIPTTIME ASC)
+>  )
+>  SALT USING 75 PARTITIONS
+>  hbase_options (blockcache = 'TRUE', TTL = '1000')
+>;

--- SQL operation complete.
>>
>>prepare s from
+>select * from minotaur.events_load75<<+ cardinality 10e6 >>  where srcip = '120.120.120.1' and agentreceipttime = timestamp '2014-05-28 15:10:33';

--- SQL command prepared.
>>
>>execute s;

--- 0 row(s) selected.
>>
>>showddl TRAFODION.MINOTAUR.EVENTS_LOAD75;

CREATE TABLE TRAFODION.MINOTAUR.EVENTS_LOAD75
  (
    SRCIP                            CHAR(45) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , SRCPORT                          INT NO DEFAULT NOT NULL NOT DROPPABLE
  , DSTIP                            VARCHAR(45) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , DSTPORT                          INT NO DEFAULT NOT NULL NOT DROPPABLE
  , AGENTRECEIPTTIME                 TIMESTAMP(0) NO DEFAULT NOT NULL NOT
      DROPPABLE
  , CATEGORYOUTCOME                  VARCHAR(30) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , CATEGORYSIGNIFICANCE             VARCHAR(30) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , DEVICESEVERITY                   VARCHAR(30) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , CATEGORYDEVICETYPE               VARCHAR(30) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , DEVICECUSTOMSTRING1              VARCHAR(30) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , FLEXSTRING1                      VARCHAR(30) CHARACTER SET ISO88591 COLLATE
      DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
  , EVENT_ID                         LARGEINT NO DEFAULT NOT NULL NOT DROPPABLE
  , PRIMARY KEY (EVENT_ID ASC, SRCIP ASC, AGENTRECEIPTTIME ASC)
  )
  SALT USING 75 PARTITIONS
  HBASE_OPTIONS
  (
    BLOCKCACHE = 'TRUE',
    TTL = '1000'
  )
;

--- SQL operation complete.
>>
>>drop table if exists t010t4;

--- SQL operation complete.
>>create table t010t4 (a int not null primary key, b int, c int) 
+>salt using 4 partitions ;

--- SQL operation complete.
>>create index t010ix1 on t010t4 (b) 
+>HBASE_OPTIONS
+>  (
+>    DATA_BLOCK_ENCODING = 'FAST_DIFF',
+>    COMPRESSION = 'GZ'
+>  )
+>  SALT LIKE TABLE
+>;

--- SQL operation complete.
>>showddl t010t4 ;

CREATE TABLE TRAFODION.SCH.T010T4
  (
    A                                INT NO DEFAULT NOT NULL NOT DROPPABLE
  , B                                INT DEFAULT NULL
  , C                                INT DEFAULT NULL
  , PRIMARY KEY (A ASC)
  )
  SALT USING 4 PARTITIONS
;

CREATE INDEX T010IX1 ON TRAFODION.SCH.T010T4
  (
    B ASC
  )
  HBASE_OPTIONS
  (
    DATA_BLOCK_ENCODING = 'FAST_DIFF',
    COMPRESSION = 'GZ'
  )
 SALT LIKE TABLE
;

--- SQL operation complete.
>>insert into t010t4 values (1,1,1) ;

--- 1 row(s) inserted.
>>prepare s from select a from t010t4 <<+cardinality 10e8>> where b > 0 ;

--- SQL command prepared.
>>explain options 'f' s ;

LC   RC   OP   OPERATOR              OPT       DESCRIPTION           CARD
---- ---- ---- --------------------  --------  --------------------  ---------

1    .    2    root                                                  1.00E+009
.    .    1    trafodion_index_scan            T010T4                1.00E+009

--- SQL operation complete.
>>execute s;

A          
-----------

          1

--- 1 row(s) selected.
>>
>>cqd detailed_statistics 'all';

--- SQL operation complete.
>>
>>prepare statsquery from
+>select frag_num, inst_num, seq_num,
+>       cast(substring(variable_info
+>                      from position('AccessedRows' in variable_info)
+>                      for position('DiskIOs' in variable_info) -
+>                          position('AccessedRows' in variable_info))
+>            as char(40) character set iso88591) as rows_accessed
+>from table(statistics(null, 'S'))
+>where tdb_name = 'EX_HBASE_ACCESS';

--- SQL command prepared.
>>
>>prepare statsquery1 from
+>select frag_num, inst_num, seq_num,
+>       case when cast(substring(variable_info
+>                      from position('AccessedRows' in variable_info)+14
+>                      for position('UsedRows' in variable_info) -
+>                          position('AccessedRows' in variable_info)-14)
+>            as integer) > 4000 then 'PASS' else 'FAIL' end
+>from table(statistics(null, 'S'))
+>where tdb_name = 'EX_HBASE_ACCESS'
+>order by 1,2,3;

--- SQL command prepared.
>>
>>drop table if exists t010t5;

--- SQL operation complete.
>>
>>create table T010t5(c1 numeric(12,2) not null,
+>                     c2 largeint not null,
+>                     c3 integer,
+>                     c4 char(1000),
+>                     primary key (c1, c2))
+>salt using 2 partitions ;

--- SQL operation complete.
>>
>>upsert using load into t010t5
+>select num*0.01, num, num, 'dummy'
+>from (select 1000*thousands+100*hundreds+10*tens+ones
+>      from (values (0)) seed(c)
+>      transpose 0,1,2,3,4,5,6,7,8,9 as ones
+>      transpose 0,1,2,3,4,5,6,7,8,9 as tens
+>      transpose 0,1,2,3,4,5,6,7,8,9 as hundreds
+>      transpose 0,1,2,3,4,5,6,7,8,9 as thousands) gen(num)
+>order by 3
+>;

--- 10000 row(s) inserted.
>>
>>create index t010t5idx1 on t010t5(c3) salt like table ;

--- SQL operation complete.
>>set parserflags 1;

--- SQL operation complete.
>>
>>prepare s from
+>select count(*) as cnt, min(c1) minc1, max(c1) maxc1, min(c2) minc2, max(c2) maxc2 from table(index_table t010t5idx1 )a;

--- SQL command prepared.
>>execute s;

CNT                   MINC1                  MAXC1                  MINC2                 MAXC2
--------------------  ---------------------  ---------------------  --------------------  --------------------

               10000                    .00                  99.99                     0                  9999

--- 1 row(s) selected.
>>execute statsquery1;

FRAG_NUM    INST_NUM    SEQ_NUM     (EXPR)
----------  ----------  ----------  ------

         2           0           1  PASS  
         2           1           1  PASS  

--- 2 row(s) selected.
>>--use statsquery to see rows flowing through each ESP
>>--execute statsquery ;
>>
>>cqd ALLOW_NULLABLE_UNIQUE_KEY_CONSTRAINT 'ON' ;

--- SQL operation complete.
>>
>>drop table if exists TRAFODION.OSSDBA.BACKLOG_ITEM;

--- SQL operation complete.
>>
>>CREATE TABLE TRAFODION.OSSDBA.BACKLOG_ITEM
+>  (
+>    DELIVERY_GROUP                   VARCHAR(80 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
+>  , LEGACY_ORDER_NO                  VARCHAR(30 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
+>  , ITEM_SOURCE                      VARCHAR(10 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , SYSTEM                           VARCHAR(20 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , FACT_DELV_NO                     VARCHAR(50 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , CUST_DELV_NO                     VARCHAR(50 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , SHIPMENT_NO                      VARCHAR(35 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , FACT_BOL_NO                      VARCHAR(100 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , CUST_BOL_NO                      VARCHAR(80 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , SO_NO                            VARCHAR(20 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , ITEM_SLN                         VARCHAR(10 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , SO_ITEM_NO                       VARCHAR(4 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , ITEM_SUBITEM                     VARCHAR(4 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , HIGHER_LEVEL                     VARCHAR(6 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , MERGING_GROUP                    VARCHAR(20 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , SO_LINE_ITEM_QTY                 NUMERIC(18, 0) NO DEFAULT NOT NULL NOT
+>      DROPPABLE
+>  , SCHED_LINE_QTY                   NUMERIC(18, 0) NO DEFAULT NOT NULL NOT
+>      DROPPABLE
+>  , SCHED_LINE_NO                    VARCHAR(4 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT NO DEFAULT NOT NULL NOT DROPPABLE
+>  , ENTRY_KEY                        VARCHAR(4 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , MATERIAL_NO                      VARCHAR(40 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , PRODUCT_DESCR                    VARCHAR(240 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , MATERIAL_TYPE                    VARCHAR(4 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , CUST_PRODUCT_NO                  VARCHAR(50 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , BUNDLE_ID                        VARCHAR(50 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , HL_BUNDLE_ID                     VARCHAR(6 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , MODEL_ID                         VARCHAR(20 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , CONFIG_ID                        VARCHAR(22 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , UPC_NO                           VARCHAR(18 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , SUPP_PROD                        VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , QUICKSHIP_CLASS                  VARCHAR(32 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , QS_CLASS_PRIO                    NUMERIC(18, 0) DEFAULT NULL
+>  , GOAL_FCT                         NUMERIC(18, 0) DEFAULT NULL
+>  , PROD_HIERARCHY                   VARCHAR(20 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , DELIVERY_PRIO                    VARCHAR(2 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , IPT                              NUMERIC(18, 0) DEFAULT NULL
+>  , NET_VALUE                        NUMERIC(126, 0) NO DEFAULT NOT NULL NOT
+>      DROPPABLE
+>  , NET_PRICE                        NUMERIC(126, 0) DEFAULT NULL
+>  , DLR_NET_PRICE                    NUMERIC(126, 0) DEFAULT NULL
+>  , BUNDLE_PRICE                     NUMERIC(126, 0) DEFAULT NULL
+>  , BUNDLE_DLR_PRICE                 NUMERIC(126, 0) DEFAULT NULL
+>  , CURRENCY                         VARCHAR(4 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , INVOICE_NO                       VARCHAR(30 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , STATI                            VARCHAR(100 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , STATUS                           VARCHAR(40 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , PARTIAL_ALLOWED                  VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , GROUPED_DELIVERY                 VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , EXT_SDD_DATE                     TIMESTAMP(0) DEFAULT NULL
+>  , EXT_SDD_COMMENT                  VARCHAR(30 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , ON_HOLD                          VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , HOLD_FIELD_OWNED                 VARCHAR(10 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , HOLD_FACTORY_WAIT                VARCHAR(10 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , HOLD_FACTORY_ACT                 VARCHAR(10 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , PREVENTS_ACK                     VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , PREVENTS_BUILD                   VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , PREVENTS_SHIP                    VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , ROUTE                            VARCHAR(6 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , SALES_FORCE                      VARCHAR(10 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , PRODUCT_LINE                     VARCHAR(2 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , BUSINESS_UNIT                    VARCHAR(5 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , SUPPLIER                         VARCHAR(30 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , EARL_ARR_DATE                    TIMESTAMP(0) DEFAULT NULL
+>  , EAD_STT                          TIMESTAMP(0) DEFAULT NULL
+>  , LATEST_ARR_DATE                  TIMESTAMP(0) DEFAULT NULL
+>  , LAD_STT                          TIMESTAMP(0) DEFAULT NULL
+>  , FIRST_TBA_FLAG                   VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , FIRST_TBA_SENT                   TIMESTAMP(0) DEFAULT NULL
+>  , FIRST_ACK_NONTBA                 TIMESTAMP(0) DEFAULT NULL
+>  , FIACK_NONTBA_SENT                TIMESTAMP(0) DEFAULT NULL
+>  , LACK_TBA_FLAG                    VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , LAST_ACK_DATE                    TIMESTAMP(0) DEFAULT NULL
+>  , LAST_ACK_SENT                    TIMESTAMP(0) DEFAULT NULL
+>  , LAST_ACK_REASON                  VARCHAR(72 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , L_ACK_REASON_TEXT                VARCHAR(1000 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , PLO_START_DATE                   TIMESTAMP(0) DEFAULT NULL
+>  , MAT_AVAIL_DATE                   TIMESTAMP(0) DEFAULT NULL
+>  , NR_REACKS                        NUMERIC(18, 0) DEFAULT NULL
+>  , NR_NONTBA_REACKS                 NUMERIC(18, 0) DEFAULT NULL
+>  , LAST_CHANGE_ORDER                TIMESTAMP(0) DEFAULT NULL
+>  , CUSTOMER_REQ_DATE                TIMESTAMP(0) DEFAULT NULL
+>  , ASAP                             VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , CURRENT_FCT                      NUMERIC(18, 0) DEFAULT NULL
+>  , LAST_RC                          VARCHAR(2 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , LAST_HEART_RC                    VARCHAR(2 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , FIRST_PO_RC                      VARCHAR(2 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , LAST_SAP_RC                      VARCHAR(2 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , FIRST_PO_RC_USER                 VARCHAR(12 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , LAST_SAP_RC_USER                 VARCHAR(12 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , LAST_ROOT_MATERIAL               VARCHAR(20 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , ROOT_MATERIAL_PL                 VARCHAR(2 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , LAST_PI_PO                       VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , OTD_VIOLATION_FPO                VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , KPL_STATUS                       VARCHAR(2 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , KPL_RC                           VARCHAR(2 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , WARRANTY_CODE                    VARCHAR(2 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , BT_ACTUAL                        TIMESTAMP(0) DEFAULT NULL
+>  , BT_GOAL_OPT                      TIMESTAMP(0) DEFAULT NULL
+>  , BT_GOAL_LATEST                   TIMESTAMP(0) DEFAULT NULL
+>  , BT_GOAL_CRIT                     VARCHAR(10 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , BT_GOAL_VALUE                    NUMERIC(18, 0) DEFAULT NULL
+>  , BT_LAD_OPT                       TIMESTAMP(0) DEFAULT NULL
+>  , BT_LAD_LATEST                    TIMESTAMP(0) DEFAULT NULL
+>  , BT_LAD_CRIT                      VARCHAR(10 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , BT_LAD_VALUE                     NUMERIC(18, 0) DEFAULT NULL
+>  , BT_FACK_OPT                      TIMESTAMP(0) DEFAULT NULL
+>  , BT_FACK_LATEST                   TIMESTAMP(0) DEFAULT NULL
+>  , BT_FACK_CRIT                     VARCHAR(10 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , BT_FACK_VALUE                    NUMERIC(18, 0) DEFAULT NULL
+>  , BT_LACK_OPT                      TIMESTAMP(0) DEFAULT NULL
+>  , BT_LACK_LATEST                   TIMESTAMP(0) DEFAULT NULL
+>  , BT_LACK_CRIT                     VARCHAR(10 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , BT_LACK_VALUE                    NUMERIC(18, 0) DEFAULT NULL
+>  , PD_ACTUAL                        TIMESTAMP(0) DEFAULT NULL
+>  , PD_GOAL_OPT                      TIMESTAMP(0) DEFAULT NULL
+>  , PD_GOAL_LATEST                   TIMESTAMP(0) DEFAULT NULL
+>  , PD_GOAL_CRIT                     VARCHAR(10 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , PD_GOAL_VALUE                    NUMERIC(18, 0) DEFAULT NULL
+>  , PD_LAD_OPT                       TIMESTAMP(0) DEFAULT NULL
+>  , PD_LAD_LATEST                    TIMESTAMP(0) DEFAULT NULL
+>  , PD_LAD_CRIT                      VARCHAR(10 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , PD_LAD_VALUE                     NUMERIC(18, 0) DEFAULT NULL
+>  , PD_FACK_OPT                      TIMESTAMP(0) DEFAULT NULL
+>  , PD_FACK_LATEST                   TIMESTAMP(0) DEFAULT NULL
+>  , PD_FACK_CRIT                     VARCHAR(10 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , PD_FACK_VALUE                    NUMERIC(18, 0) DEFAULT NULL
+>  , PD_LACK_OPT                      TIMESTAMP(0) DEFAULT NULL
+>  , PD_LACK_LATEST                   TIMESTAMP(0) DEFAULT NULL
+>  , PD_LACK_CRIT                     VARCHAR(10 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , PD_LACK_VALUE                    NUMERIC(18, 0) DEFAULT NULL
+>  , DG_ACTUAL                        TIMESTAMP(0) DEFAULT NULL
+>  , PGI_ACTUAL                       TIMESTAMP(0) DEFAULT NULL
+>  , PLANNED_PGI_DATE                 TIMESTAMP(0) DEFAULT NULL
+>  , ERCV_ACTUAL                      TIMESTAMP(0) DEFAULT NULL
+>  , ESHP_ACTUAL                      TIMESTAMP(0) DEFAULT NULL
+>  , POD_ACTUAL                       TIMESTAMP(0) DEFAULT NULL
+>  , INVO_ACTUAL                      TIMESTAMP(0) DEFAULT NULL
+>  , DELIVERY_BLOCK                   VARCHAR(12 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , LAST_UPDATE                      TIMESTAMP(0) DEFAULT NULL
+>  , CREDIT_STATUS                    VARCHAR(200 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , PLANT_CODE                       VARCHAR(50 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , SHIP_FROM                        VARCHAR(50 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , SHIPMENT_HOLD                    VARCHAR(200 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , OPEN_QTY                         NUMERIC(18, 0) DEFAULT NULL
+>  , SHIPPED_QTY                      NUMERIC(18, 0) DEFAULT NULL
+>  , BIG_DEAL_ID                      VARCHAR(50 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , CUSTOMER_ITEM_NO                 VARCHAR(10 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , FDA_ACTUAL                       TIMESTAMP(0) DEFAULT NULL
+>  , CANCELED_AT                      TIMESTAMP(0) DEFAULT NULL
+>  , CANCEL_TYPE                      VARCHAR(200 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , SAP_DELV_NO                      VARCHAR(50 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , IS_VALID                         VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , SALES_ORG                        VARCHAR(6 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , SUPPLIER_SDD                     TIMESTAMP(0) DEFAULT NULL
+>  , CLEAN_DATE                       TIMESTAMP(0) DEFAULT NULL
+>  , RESELLER_ORDER                   VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , CUSTOMER_NO                      VARCHAR(10 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , PURCH_ORDER_DATE                 TIMESTAMP(0) DEFAULT NULL
+>  , BUNDLE_NAME                      VARCHAR(80 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , BUNDLE_DESCR                     VARCHAR(120 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , PRICING_BUNDLE_ID                VARCHAR(80 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , PRICING_BUNDLE_NAME              VARCHAR(80 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , CAREPACK_ITEM                    VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , AUTOREG_FLAG                     VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , REG_CONTACT_ADD_NO               NUMERIC(18, 0) DEFAULT NULL
+>  , INVOICE_ITEM_NO                  VARCHAR(10 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , TAX_AMOUNT                       NUMERIC(126, 0) DEFAULT NULL
+>  , TAXABLE_AMOUNT                   NUMERIC(126, 0) DEFAULT NULL
+>  , HIDDEN_ACK_DATE                  TIMESTAMP(0) DEFAULT NULL
+>  , ACK_DATE_HIS                     VARCHAR(4000 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , SDD_HIS                          VARCHAR(4000 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , SUPPLIER_SDD_HIS                 VARCHAR(4000 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , SSD_HIS                          VARCHAR(4000 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , NUM_OF_ACKS                      NUMERIC(18, 0) DEFAULT NULL
+>  , NUM_OF_HIDDEN_ACKS               NUMERIC(18, 0) DEFAULT NULL
+>  , NUM_OF_SDDS                      NUMERIC(18, 0) DEFAULT NULL
+>  , NUM_OF_SSDS                      NUMERIC(18, 0) DEFAULT NULL
+>  , EXT_SSD_DATE                     TIMESTAMP(0) DEFAULT NULL
+>  , HIDDEN_ACK_DATE_HIS              VARCHAR(4000 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , FULL_INVOICE_NO                  VARCHAR(30 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , PRICE_SOURCE                     VARCHAR(30 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , BENCH_HOLD_RC                    VARCHAR(80 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , ACK_DATE_COMMENT                 VARCHAR(80 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , MATERIAL_CAT                     VARCHAR(30 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , GATP_ACK                         TIMESTAMP(0) DEFAULT NULL
+>  , GATP_ACK_SENT                    TIMESTAMP(0) DEFAULT NULL
+>  , EXT_SUP_ACK                      TIMESTAMP(0) DEFAULT NULL
+>  , EXT_SUP_ACK_SENT                 TIMESTAMP(0) DEFAULT NULL
+>  , STORAGE_LOCATION                 VARCHAR(80 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , PAYMENT_TERMS                    VARCHAR(10 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , TAX_STATUS                       VARCHAR(10 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , INCO_TERMS                       VARCHAR(50 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , COMPLEX_IN                       TIMESTAMP(0) DEFAULT NULL
+>  , COMPLEX_OUT                      TIMESTAMP(0) DEFAULT NULL
+>  , PAYMENT_TERMS_DESCR              VARCHAR(60 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , TAX_STATUS_DESCR                 VARCHAR(30 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , MFG_PART_NUMBER                  VARCHAR(40 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , CUSTOMER_SLA                     VARCHAR(10 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , PENALTY_FLAG                     VARCHAR(10 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , GPLS_LINE_ASSOC                  VARCHAR(10 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , SPEZ_SERVICE_LINE_ASSOC          VARCHAR(10 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , EXT_MAT_GROUP                    VARCHAR(10 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , LOGISTICS_CODES                  VARCHAR(50 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , OFSC_NAME                        VARCHAR(80 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , OFSC_PHONE                       VARCHAR(80 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , APO_HL_ITEM_NO                   VARCHAR(50 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , BACKORDERED_QTY                  NUMERIC(18, 0) DEFAULT NULL
+>  , HUB_DELV_NO                      VARCHAR(50 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , HW2CP_ASSOC                      VARCHAR(50 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , CTO_ID                           VARCHAR(50 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , CAMPAIGN_CODE                    VARCHAR(50 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , SHIP_TO_ADD_NO                   NUMERIC(18, 0) DEFAULT NULL
+>  , CATALOG_ID                       VARCHAR(60 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , COMMISSION_AMOUNT                NUMERIC(126, 0) DEFAULT NULL
+>  , COMMISSION_RAT                   NUMERIC(126, 0) DEFAULT NULL
+>  , PRICE_REF_1                      NUMERIC(126, 0) DEFAULT NULL
+>  , PRICE_REF_2                      NUMERIC(126, 0) DEFAULT NULL
+>  , PRICE_REF_3                      NUMERIC(126, 0) DEFAULT NULL
+>  , PRICE_REF_4                      NUMERIC(126, 0) DEFAULT NULL
+>  , SHOW_PRICES                      VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , SAP_DELV_GRP                     VARCHAR(10 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , CUSTOMER_FACING_ITEM             VARCHAR(6 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , ETA                              NUMERIC(18, 0) DEFAULT NULL
+>  , LEAD_TIME                        NUMERIC(18, 0) DEFAULT NULL
+>  , AVAILABILITY_FLAG                VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , INV_LINE_PRICE                   NUMERIC(126, 0) DEFAULT NULL
+>  , INV_DLR_LINE_PRICE               NUMERIC(126, 0) DEFAULT NULL
+>  , INV_UNIT_PRICE                   NUMERIC(126, 0) DEFAULT NULL
+>  , MASTER_CONTRACT_ID               VARCHAR(80 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , ITEM_CATEGORY                    VARCHAR(20 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , INV_DLR_UNIT_PRICE               NUMERIC(126, 0) DEFAULT NULL
+>  , MANUAL_ACK_USED                  VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , PARTNER_REF                      NUMERIC(18, 0) DEFAULT NULL
+>  , GTIN13_NO                        VARCHAR(20 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , TELCO_FLAG                       VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , CONFIG_UID                       VARCHAR(14 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , COO_EXCLUSION_FLAG               VARCHAR(2 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , HAS_POA_PROBLEM                  VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , HAS_POR_PROBLEM                  VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , HAS_OSR_PROBLEM                  VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , HAS_ASN_PROBLEM                  VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , HAS_SBN_PROBLEM                  VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , HAS_INV_PROBLEM                  VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , EOP_ITEM_NO                      NUMERIC(18, 0) DEFAULT NULL
+>  , SHIP_TO_ID                       VARCHAR(40 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , NUM_OF_SUPPLIER_SDDS             NUMERIC(18, 0) DEFAULT NULL
+>  , SCHEDULED_SHIP_DATE              TIMESTAMP(0) DEFAULT NULL
+>  , SCHEDULED_DELIVERY_DATE          TIMESTAMP(0) DEFAULT NULL
+>  , SOFT_COMMIT                      VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , SC_COMMIT_SOURCE                 VARCHAR(100 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , SC_COMMIT_DATE                   TIMESTAMP(0) DEFAULT NULL
+>  , SC_COMMIT_HIS                    VARCHAR(4000 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , SC_COMMIT_SENT                   TIMESTAMP(0) DEFAULT NULL
+>  , NUM_OF_SC_COMMIT                 NUMERIC(18, 0) DEFAULT NULL
+>  , DELIVERY_STATUS                  VARCHAR(100 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , ISLOGISTICALSKU                  VARCHAR(2 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , LSP_NAME                         VARCHAR(255 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , FF_PO_NO                         VARCHAR(80 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , CPB                              VARCHAR(1 BYTE) CHARACTER SET UTF8 COLLATE
+>      DEFAULT DEFAULT NULL
+>  , CANCELLATION_REASON              VARCHAR(60 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , SHIP_FROM_ORIG                   VARCHAR(50 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , SUPPLIER_ORIG                    VARCHAR(30 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , PLANT_CODE_ORIG                  VARCHAR(50 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , REL2FF_DATE                      TIMESTAMP(0) DEFAULT NULL
+>  , B2B_FLAG                         VARCHAR(20 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , SHIP_FROM_MFGSO                  VARCHAR(50 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , SUPPLIER_MFGSO                   VARCHAR(30 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , PLANT_CODE_MFGSO                 VARCHAR(50 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , VENDOR_PO_ORG_SO                 VARCHAR(80 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , ROUTE_ORIG                       VARCHAR(6 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , SYSTEM_MFGSO                     VARCHAR(20 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , SO_ITEM_NO_MFGSO                 VARCHAR(4 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , SO_NO_MFGSO                      VARCHAR(20 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , ORDER_NO_MFGSO                   VARCHAR(30 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , ENTITLEMENT_ID                   VARCHAR(20 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , BILLING_PLAN                     VARCHAR(60 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , LAST_PRICE_DATE                  TIMESTAMP(0) DEFAULT NULL
+>  , BILLING_COMPLETE                 VARCHAR(2 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , FIRST_PCSD                       TIMESTAMP(0) DEFAULT NULL
+>  , FIRST_PCDD                       TIMESTAMP(0) DEFAULT NULL
+>  , SHIPPING_TYPE                    VARCHAR(6 BYTES) CHARACTER SET UTF8
+>      COLLATE DEFAULT DEFAULT NULL
+>  , PRIMARY KEY (LEGACY_ORDER_NO ASC, ITEM_SLN ASC)
+>  )
+>  SALT USING 16 PARTITIONS
+>  HBASE_OPTIONS
+>  (
+>    DATA_BLOCK_ENCODING = 'FAST_DIFF',
+>    COMPRESSION = 'GZ'
+>  )
+>;

--- SQL operation complete.
>>
>>cqd hbase_hash2_partitioning 'off' ;

--- SQL operation complete.
>>
>>select * from ossdba.backlog_item ;

--- 0 row(s) selected.
>>
>>log;
